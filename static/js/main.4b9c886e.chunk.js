(this["webpackJsonplight-configurator"]=this["webpackJsonplight-configurator"]||[]).push([[0],{142:function(e,t,n){},153:function(e,t,n){"use strict";n.r(t);var i=n(3),a=n(0),r=n.n(a),l=n(39),o=n.n(l),s=(n(142),n(21)),c=n(9),u=n(218),d=n(219),h=n(72),f=n(211),m=n(217),g=n(206),j=n(225),b=n(210),p=n(196),O=n(224),x=[{id:"B2713",name:"Edge 1030",polygons:!0},{id:"B3095",name:"Edge 1030 / Bontrager",polygons:!0},{id:"B3570",name:"Edge 1030 Plus",polygons:!0},{id:"B1836",name:"Edge 1000 / Explore",polygons:!0},{id:"B3011",name:"Edge Explore",polygons:!0},{id:"B3122",name:"Edge 830",polygons:!0},{id:"B2530",name:"Edge 820 / Explore",polygons:!0},{id:"B3121",name:"Edge 530",polygons:!0},{id:"B3112",name:"Edge 520 Plus",polygons:!0},{id:"B2067",name:"Edge 520",polygons:!1},{id:"B3558",name:"Edge 130 Plus",polygons:!1},{id:"B2909",name:"Edge 130",polygons:!1}],v={};x.forEach((function(e){return v[e.id]=e}));var y=v,T=[{id:"A",name:"Acceleration"},{id:"B",name:"Light Battery"},{id:"C",name:"Speed"},{id:"E",name:"Timespan"},{id:"F",name:"Position"},{id:"G",name:"GPS accuracy"}];v={},T.forEach((function(e){return v[e.id]=e.name}));var V=v,C=[{id:"0",name:"UTC Time"},{id:"r",name:"Sunrise"},{id:"s",name:"Sunset"}];v={},C.forEach((function(e){return v[e.id]=e.name}));var F=v,M=[{id:0,name:"Metric (km/h)"},{id:1,name:"Statute (MPH)"}],w=[{id:0,name:"km/h"},{id:1,name:"MPH"}],N=[{id:0,name:"24h"},{id:1,name:"12h"}],k=[{id:"=",name:"Equal to"},{id:">",name:"Greater than"},{id:"<",name:"Lower than"}],E=[null,"Bad","Low","Ok","Good","New"],G=["N/A","Last","Poor","Ok","Good"],L=[{id:0,name:"Off"},{id:1,name:"Steady beam 81-100% intensity"},{id:2,name:"Steady beam 61-80% intensity"},{id:3,name:"Steady beam 41-60% intensity"},{id:4,name:"Steady beam 21-40% intensity"},{id:5,name:"Steady beam 0-20% intensity"},{id:6,name:"Slow flash mode"},{id:7,name:"Fast flash mode"},{id:8,name:"Randomly timed flash mode"},{id:9,name:"Auto"},{id:59,name:"Custom mode 1 (manufacturer-defined)"},{id:60,name:"Custom mode 2 (manufacturer-defined)"},{id:61,name:"Custom mode 3 (manufacturer-defined)"},{id:62,name:"Custom mode 4 (manufacturer-defined)"},{id:63,name:"Custom mode 5 (manufacturer-defined)"}],B=[{id:1,name:"Bontrager ION PRO RT",modes:[{id:0,name:"Off"},{id:1,name:"High"},{id:2,name:"Medium"},{id:5,name:"Low"},{id:62,name:"Night Flash"},{id:63,name:"Day Flash"}],lightModes:79691776},{id:99,name:"Unknown",modes:L,lightModes:0}],D=[{id:1,name:"Bontrager Flare RT",modes:[{id:0,name:"Off"},{id:1,name:"Day Steady"},{id:5,name:"Night Steady"},{id:7,name:"Day Flash"},{id:8,name:"All-Day Flash"},{id:63,name:"Night Flash"}],lightModes:100663648},{id:99,name:"Unknown",modes:L,lightModes:0}],P=n(38),S=n(222),I=n(228),q=n(107),A=n.n(q),H=n(204),_=Object(p.a)((function(e){return{input:{width:"100%"}}})),R=Object(O.a)((function(e){var t=e.items,n=e.label,l=e.value,o=e.setter,s=e.required,c=Object(P.a)(),u=_();return Object(a.useEffect)((function(){t.find((function(e){return e.id===l}))||o(null)}),[t,l,o]),null!==l&&t.find((function(e){return e.id===l}))||(l=""),Object(i.jsx)(S.a,{className:u.input,id:c,select:!0,required:s,error:!(!s||""!==l),label:n,value:l,onChange:function(e){var n=e.target.value;o(t.find((function(e){return e.id===n}))?n:null)},variant:"standard",InputProps:{readOnly:!o,endAdornment:o&&!s&&""!==l?Object(i.jsx)(r.a.Fragment,{children:Object(i.jsx)(H.a,{style:{marginRight:"1em",padding:"0"},onClick:function(){return o(null)},children:Object(i.jsx)(A.a,{})})}):null},children:t.map((function(e){return Object(i.jsx)(I.a,{value:e.id,children:e.name},e.id)}))})})),U=Object(p.a)((function(e){return{input:{width:"100%"}}})),W=Object(O.a)((function(e){var t=e.type,n=e.label,a=e.value,r=e.setter,l=e.required,o=Object(P.a)(),s=U();return(null===a||"number"===t&&Number.isNaN(a))&&(a=""),Object(i.jsx)(S.a,{id:o,className:s.input,label:n,required:l,error:!(!l||a),variant:"standard",type:t,value:a,onChange:function(e){var n=e.target.value;r("number"===t?parseFloat(n):n)},InputProps:{readOnly:!r}})})),z=n(29),$=n(37),J=n(18),Z=function(){function e(t){var n=this;Object(z.a)(this,e),this.name=null,this.filters=[],this.lightMode=null,this.open=!0,this.setName=function(e){e.length>6||(n.name=e.replace(/[^a-z0-9]/gi,""))},this.setLightMode=function(e){n.lightMode=e},this.setOpen=function(e){n.open=e},this._hasLightMode=t,this.id=Object(P.a)(),Object(J.d)(this,{id:!1})}return Object($.a)(e,[{key:"getConfigurationValue",value:function(){var e="".concat(this.name||"",":").concat(this.filters.length);return this._hasLightMode&&(e+=":".concat(this.lightMode)),this.filters.forEach((function(t){e+="".concat(t.getConfigurationValue()||"")})),e}},{key:"isValid",value:function(){return!(this._hasLightMode&&null===this.lightMode||!this.filters.length)&&this.filters.every((function(e){return e.isValid()}))}},{key:"getDisplayName",value:function(e){var t=this,n="Group";return this.name&&(n+=" Name: "+this.name),e&&null!==this.lightMode&&(n+=" Light Mode: "+e.find((function(e){return e.id===t.lightMode})).name),n}},{key:"displayName",get:function(){return"Group "+(this.name||"")}}]),e}(),K=n(59),Q=n(71),X=n(85),Y=function(e,t,n){return null===t?null:"0"===e?Object(X.a)(Object(K.a)(Object(Q.a)(),t),0===n?"H:mm":"h:mm aa"):F[e]+(0===t?"":t>0?"+"+t/60+" min":t/60+" min")},ee=function(){function e(){var t=this;Object(z.a)(this,e),this.type=null,this.operator=null,this.value=null,this.fromType=null,this.fromValue=null,this.toType=null,this.toValue=null,this.polygons=[],this.open=!0,this.setType=function(e){t.type=e},this.setOperator=function(e){t.operator=e},this.setValue=function(e){t.value=e},this.setFromType=function(e){t.fromType=e},this.setFromValue=function(e){t.fromValue=e},this.setToType=function(e){t.toType=e},this.setToValue=function(e){t.toValue=e},this.setOpen=function(e){t.open=e},this.id=Object(P.a)(),Object(J.d)(this,{id:!1})}return Object($.a)(e,[{key:"isValid",value:function(){switch(this.type){case"E":return this.fromType&&null!==this.fromValue&&!Number.isNaN(this.fromValue)&&this.toType&&null!==this.toValue&&!Number.isNaN(this.toValue);case"F":return this.polygons.length;default:return this.type&&""!==this.value&&null!==this.value&&!Number.isNaN(this.value)&&this.operator}}},{key:"getConfigurationValue",value:function(){var e=function(e,t){return"0"===e?t:"".concat(e).concat(t)},t=this.type;return"F"===this.type?this.polygons.length?(t+="".concat(this.polygons.length),this.polygons.forEach((function(e){e.vertexes.forEach((function(e){t+=",".concat(e[0],",").concat(e[1])}))})),t):null:"E"===this.type?(t+="".concat(e(this.fromType,this.fromValue),","),t+="".concat(e(this.toType,this.toValue))):"".concat(t).concat(this.operator).concat(this.value)}},{key:"getDisplayName",value:function(e){if(!this.type&&"E"!==this.type)return null;var t=V[this.type]+" ";if("E"===this.type)null!==this.fromValue&&null!==this.toValue&&(t+="from "+Y(this.fromType,this.fromValue,e.timeFormat)+" to ",t+=Y(this.toType,this.toValue,e.timeFormat));else if("F"===this.type)this.polygons.length&&(t+=this.polygons.length+" polygons");else if(null!==this.value&&!Number.isNaN(this.value))switch(t+=(this.operator||"")+" ",this.type){case"A":t+=this.value+"% per second";break;case"B":t+=E[this.value];break;case"C":t+=function(e,t){var n=0===t?3.6*e:2.236934*e,i=w[t].name;return"".concat(Math.round(100*n)/100," ").concat(i)}(this.value,e.units);break;case"G":t+=G[this.value]}return t}},{key:"hasOperator",get:function(){return this.type&&"E"!==this.type&&"F"!==this.type}}]),e}(),te=function(e){return Math.round(1e5*e)/1e5},ne=function e(t){var n=this;Object(z.a)(this,e),this.vertexes=[],this.setVertexes=function(e){n.vertexes=e.map((function(e){return[te(e.lat),te(e.lng)]}))},Object(J.d)(this,{}),t&&this.setVertexes(t)},ie=new ee;ie.type="D",ie.operator="=",ie.value="1";var ae=function(e,t,n){var i,a=null,r=!1;for(i=t;i<e.length;i++){var l=e[i],o=l.charCodeAt(0);if(46===o)r=!0;else if(o>57||o<48)break;a=null===a?l:a+l}return n[0]=i,null===a?null:r?parseFloat(a):parseInt(a)},re=function(e,t,n){var i,a=null;for(i=t;i<e.length;i++){var r=e[i];if(":"===r||"#"===r)break;a=null===a?r:a+r}return n[0]=i,a},le=function(e,t,n,i,a){var r=e[t],l="s"!==r&&"r"!==r?"0":r;"0"!==l&&t++,i[a]=l,i[a+1]=ae(e,t,n)},oe=function(e,t,n){n[1]=null;var i=new Array(8*ae(e,t,n)),a=0;for(t=n[0]+1;a<i.length;)i[a]=ae(e,t,n),a++,t=n[0]+1;return i},se=function(e,t,n){return n[1]=e[t],ae(e,t+1,n)},ce=function(e,t,n){var i=new Array(4);return n[1]=null,le(e,t,n,i,0),le(e,n[0]+1,n,i,2),i},ue=function(e,t,n){var i=new ee;if(i.type=e,i.operator=t,"E"===e)i.fromType=n[0],i.fromValue=n[1],i.toType=n[2],i.toValue=n[3];else if("F"===e)for(var a=0;a<n.length;a+=8){for(var r=new ne,l=a+8,o=a;o<l;)r.vertexes.push([n[o++],n[o++]]);i.polygons.push(r)}else i.value=n;return i},de=function(e,t,n,i){var a=[],r=function(e,t,n,i){var a=ae(e,t,i);if(null===a)return null;var r=n?3:2,l=ae(e,i[0]+1,i),o=new Array(3*a+l*r);t=i[0];for(var s=0;t<e.length;){var c=e[t].charCodeAt(0);if(35===c)break;if(124===c)o[s]=re(e,t+1,i),o[s+1]=ae(e,i[0]+1,i),n&&(o[s+2]=ae(e,i[0]+1,i)),s+=r,t=i[0];else if(c>=65&&c<=90){var u=70===c?oe(e,t+1,i):69===c?ce(e,t+1,i):se(e,t+1,i);o[s]=e[t],o[s+1]=i[1],o[s+2]=u,s+=3,t=i[0]}else t++}return o}(e,t,n,i);if(!r)return a;for(var l=0;l<r.length;){var o=new Z(n);o.name=r[l++];var s=r[l++];o.lightMode=n?r[l++]:null;for(var c=l+3*s,u=l;u<c;)o.filters.push(ue(r[u++],r[u++],r[u++]));l=c,a.push(o)}return a},he=function(){function e(){var t=this;Object(z.a)(this,e),this.device=null,this.units=0,this.timeFormat=0,this.globalFilterGroups=[],this.headlight=null,this.headlightModes=null,this.headlightFilterGroups=[],this.headlightDefaultMode=null,this.taillight=null,this.taillightModes=null,this.taillightFilterGroups=[],this.taillightDefaultMode=null,this.setDevice=function(e){t.device=e},this.setUnits=function(e){t.units=e},this.setTimeFormat=function(e){t.timeFormat=e},this.setHeadlight=function(e){t.headlight=e},this.setHeadlightModes=function(e){t.headlightModes=e},this.setHeadlightDefaultMode=function(e){t.headlightDefaultMode=e},this.setTaillight=function(e){t.taillight=e},this.setTaillightModes=function(e){t.taillightModes=e},this.setTaillightDefaultMode=function(e){t.taillightDefaultMode=e},Object(J.d)(this,{})}return Object($.a)(e,[{key:"isValid",value:function(){return this.globalFilterGroups.every((function(e){return e.isValid()}))&&(null!==this.headlight&&null!==this.headlightDefaultMode&&this.headlightFilterGroups.every((function(e){return e.isValid()}))||null!==this.taillight&&null!==this.taillightDefaultMode&&this.taillightFilterGroups.every((function(e){return e.isValid()})))&&this.device}},{key:"getConfigurationValue",value:function(){if(!this.isValid())return null;var e="".concat(this.getFilterGroupsConfigurationValue(this.globalFilterGroups,null));return e+="#".concat(this.headlightModes||""),e+="#".concat(this.getFilterGroupsConfigurationValue(this.headlightFilterGroups,this.headlightDefaultMode)),e+="#".concat(this.taillightModes||""),e+="#".concat(this.getFilterGroupsConfigurationValue(this.taillightFilterGroups,this.taillightDefaultMode)),e+="#".concat(this.device),e+="#".concat(null===this.headlight?"":this.headlight),e+="#".concat(null===this.taillight?"":this.taillight),e+="#".concat(this.units),e+="#".concat(this.timeFormat)}},{key:"getFilterGroupsConfigurationValue",value:function(e,t){if(!e.length&&null===t)return"";var n="",i=0,a=e.length,r="";return null!==t&&(i++,a++,r="|".concat(function(e){var t=new Z(!0);return t.lightMode=e,t.filters.push(ie),t.getConfigurationValue()}(t))),e.forEach((function(e){i+=e.filters.length,n+="|".concat(e.getConfigurationValue())})),"".concat(i,",").concat(a).concat(n).concat(r)}}],[{key:"parse",value:function(t){if(!t||0===t.length)return null;var n=[0,0],i=new e;i.globalFilterGroups=de(t,0,!1,n),i.headlightModes=ae(t,n[0]+1,n);var a,r=de(t,n[0]+1,!0,n);return r.length&&(a=r.splice(r.length-1,1)[0],i.headlightDefaultMode=a.lightMode),i.headlightFilterGroups=r,i.taillightModes=ae(t,n[0]+1,n),(r=de(t,n[0]+1,!0,n)).length&&(a=r.splice(r.length-1,1)[0],i.taillightDefaultMode=a.lightMode),i.taillightFilterGroups=r,i.device=re(t,n[0]+1,n),i.headlight=ae(t,n[0]+1,n),i.taillight=ae(t,n[0]+1,n),i.units=ae(t,n[0]+1,n),i.timeFormat=ae(t,n[0]+1,n),i.isValid()?i:null}}]),e}(),fe=n(214),me=n(216),ge=n(215),je=n(203),be=n(96),pe=n.n(be),Oe=n(226),xe=n(8),ve=Object(xe.a)({root:{border:"1px solid rgba(0, 0, 0, .125)",boxShadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},"&$expanded":{margin:"auto"}},expanded:{}})(Oe.a),ye=n(205),Te=n(109),Ve=n.n(Te),Ce=n(108),Fe=n.n(Ce),Me=n(207),we=n(110),Ne=n.n(we),ke=Object(xe.a)({root:{backgroundColor:"rgba(0, 0, 0, .03)",borderBottom:"1px solid rgba(0, 0, 0, .125)",marginBottom:-1,minHeight:56,"&$expanded":{minHeight:56}},content:{"&$expanded":{margin:"12px 0"}},expanded:{}})(ye.a),Ee=Object(p.a)((function(e){return{name:{display:"flex",alignItems:"center"},error:{color:"#f44336",display:"flex",justifyContent:"center",alignItems:"center"}}})),Ge=Object(O.a)((function(e){var t=e.item,n=e.param1,a=e.removeLabel,r=e.removeCallback,l=Ee();return Object(i.jsx)(ke,{expandIcon:Object(i.jsx)(Fe.a,{}),"aria-controls":t.id,id:t.id,children:Object(i.jsx)("div",{style:{width:"100%"},children:Object(i.jsxs)(g.a,{container:!0,children:[Object(i.jsx)(g.a,{item:!0,xs:2,sm:1,children:Object(i.jsx)(Me.a,{"aria-label":a,onClick:function(e){return e.stopPropagation()},onFocus:function(e){return e.stopPropagation()},control:Object(i.jsx)(H.a,{edge:"end","aria-label":"delete",onClick:function(){return r(t)},children:Object(i.jsx)(Ve.a,{})})})}),Object(i.jsx)(g.a,{item:!0,xs:9,sm:10,className:l.name,children:Object(i.jsx)(h.a,{children:t.getDisplayName(n)})}),Object(i.jsx)(g.a,{item:!0,xs:1,sm:1,className:l.error,children:t.isValid()?null:Object(i.jsx)(Ne.a,{})})]})})})})),Le=n(208),Be=Object(xe.a)((function(e){return{root:{padding:e.spacing(2)}}}))(Le.a),De=n(230),Pe=Object(p.a)((function(e){return{input:{width:"100%"}}})),Se=Object(O.a)((function(e){var t=e.label,n=e.value,a=e.setter,r=e.getLabelText,l=e.step,o=e.min,s=e.max,c=e.defaultValue,u=Object(P.a)(),d=Pe();return null==r||r(n)||(n=c),Object(i.jsxs)("div",{className:d.input,children:[Object(i.jsx)(h.a,{id:u,gutterBottom:!0,children:t}),Object(i.jsx)(De.a,{step:l,min:o,max:s,marks:!0,"aria-labelledby":u,valueLabelFormat:r,valueLabelDisplay:"auto",value:n,onChange:function(e,t){a(t)}})]})})),Ie=Object(O.a)((function(e){var t=e.filter;return Object(i.jsxs)(g.a,{container:!0,spacing:3,children:[Object(i.jsx)(g.a,{item:!0,xs:12,sm:4,children:Object(i.jsx)(R,{required:!0,items:k,label:"Operator",setter:t.setOperator,value:t.operator})}),Object(i.jsx)(g.a,{item:!0,xs:12,sm:8,children:Object(i.jsx)(Se,{label:"Battery state",setter:t.setValue,value:t.value,getLabelText:function(e){return E[e]},step:1,min:1,max:5,defaultValue:5})})]})})),qe=Object(O.a)((function(e){var t=e.label,n=e.filter;return Object(i.jsxs)(g.a,{container:!0,spacing:3,children:[Object(i.jsx)(g.a,{item:!0,xs:12,sm:4,children:Object(i.jsx)(R,{required:!0,items:k,label:"Operator",setter:n.setOperator,value:n.operator})}),Object(i.jsx)(g.a,{item:!0,xs:12,sm:8,children:Object(i.jsx)(W,{required:!0,label:t,type:"number",setter:n.setValue,value:n.value})})]})})),Ae=function(e){return{units:e.units,timeFormat:e.timeFormat}},He=r.a.createContext(Ae(new he)),_e=Object(O.a)((function(e){var t=e.filter,n=Object(a.useContext)(He).units,l=r.a.useState(0),o=Object(c.a)(l,2),s=o[0],u=o[1];return Object(a.useEffect)((function(){var e;e=Number.isNaN(t.value)?0:0===n?3.6*t.value:2.236934*t.value,u(Math.round(100*e)/100)}),[n,t.value,u]),Object(i.jsxs)(g.a,{container:!0,spacing:3,children:[Object(i.jsx)(g.a,{item:!0,xs:12,sm:4,children:Object(i.jsx)(R,{required:!0,items:k,label:"Operator",setter:t.setOperator,value:t.operator})}),Object(i.jsx)(g.a,{item:!0,xs:12,sm:5,children:Object(i.jsx)(W,{required:!0,label:"Speed",type:"number",setter:function(e){""===e&&(e=null);var i=1===n?.44704*e:.27777777777778*e;t.setValue(null===e?null:Math.round(1e5*i)/1e5)},value:s})}),Object(i.jsx)(g.a,{item:!0,xs:12,sm:3,children:Object(i.jsx)(R,{items:w,label:"Units",value:n})})]})})),Re=Object(O.a)((function(e){var t=e.filter;return Object(i.jsxs)(g.a,{container:!0,spacing:3,children:[Object(i.jsx)(g.a,{item:!0,xs:12,sm:4,children:Object(i.jsx)(R,{required:!0,items:k,label:"Operator",setter:t.setOperator,value:t.operator})}),Object(i.jsx)(g.a,{item:!0,xs:12,sm:8,children:Object(i.jsx)(Se,{label:"Accuracy",setter:t.setValue,value:t.value,getLabelText:function(e){return G[e]},step:1,min:0,max:4,defaultValue:4})})]})})),Ue=n(220),We=Object(O.a)((function(e){var t=e.label,n=e.value,a=e.setter,r=function(e){a(e)};return n instanceof Date||(n=""),Object(i.jsx)(He.Consumer,{children:function(e){var a=e.timeFormat;return Object(i.jsx)(Ue.a,{ampm:1===a,label:t,value:n,onChange:r,renderInput:function(e){return Object(i.jsx)(S.a,Object(s.a)(Object(s.a)({},e),{},{margin:"normal",variant:"standard"}))}})}})})),ze=n(112),$e=n(113),Je=Object(O.a)((function(e){var t=e.filter,n=function(e,t){return null===t?null:"0"===e?Object(K.a)(Object(Q.a)(),t):t/60},a=function(e,t){return null===t?null:"0"===e?Object(ze.a)(t,Object(Q.a)()):60*t},l=r.a.useState({fromValue:n(t.fromType,t.fromValue),toValue:n(t.toType,t.toValue)}),o=Object(c.a)(l,2),s=o[0],u=o[1],d=function(e){e="0"===t.fromType?Object($e.a)(e,0):e,t.setFromValue(a(t.fromType,e)),u({fromValue:e,toValue:s.toValue})},h=function(e){e="0"===t.toType?Object($e.a)(e,0):e,t.setToValue(a(t.toType,e)),u({fromValue:s.fromValue,toValue:e})};return Object(i.jsxs)(r.a.Fragment,{children:[Object(i.jsxs)(g.a,{container:!0,spacing:3,children:[Object(i.jsx)(g.a,{item:!0,xs:12,sm:6,children:Object(i.jsx)(R,{required:!0,items:C,label:"From",setter:t.setFromType,value:t.fromType})}),Object(i.jsx)(g.a,{item:!0,xs:12,sm:6,children:t.fromType?"0"===t.fromType?Object(i.jsx)(We,{setter:d,value:s.fromValue}):Object(i.jsx)(W,{required:!0,label:"Offset in minutes",type:"number",setter:d,value:s.fromValue}):null})]}),Object(i.jsxs)(g.a,{container:!0,spacing:3,children:[Object(i.jsx)(g.a,{item:!0,xs:12,sm:6,children:Object(i.jsx)(R,{required:!0,items:C,label:"To",setter:t.setToType,value:t.toType})}),Object(i.jsx)(g.a,{item:!0,xs:12,sm:6,children:t.toType?"0"===t.toType?Object(i.jsx)(We,{setter:h,value:s.toValue}):Object(i.jsx)(W,{required:!0,label:"Offset in minutes",type:"number",setter:h,value:s.toValue}):null})]})]})})),Ze=n(212),Ke=n(213),Qe=n(223),Xe=n(53),Ye=(n(150),n(151),n(152),Object(O.a)((function(e){var t=e.polygons,n={},i=function(e){e.workingLayer.on("pm:vertexadded",(function(e){e.sourceTarget.getLatLngs().length>=4&&s.pm.Draw.Polygon._finishShape(e)}))},r=function(e){n[e.layer._leaflet_id].setVertexes(e.layer.getLatLngs()[0])},l=Object(J.b)((function(e){var i=new ne(e.layer.getLatLngs()[0]);n[e.layer._leaflet_id]=i,t.push(i),e.layer.on("pm:edit",r)})),o=Object(J.b)((function(e){var i=n[e.layer._leaflet_id];delete n[e.layer._leaflet_id],t.remove(i),e.layer.off("pm:edit",r)})),s=Object(Ze.a)();return Object(a.useEffect)((function(){s.pm.setGlobalOptions({snappable:!1,allowSelfIntersection:!1,hideMiddleMarkers:!0}),s.pm.addControls({position:"topleft",drawCircle:!1,drawMarker:!1,drawCircleMarker:!1,drawRectangle:!1,drawPolyline:!1,cutPolygon:!1}),s.pm.Toolbar.changeActionsOfControl("Polygon",["removeLastVertex","cancel"]),s.on("pm:drawstart",i),s.on("pm:create",l),s.on("pm:remove",o);var e=Object(Xe.featureGroup)();return t.forEach((function(t){var i=Object(Xe.polygon)(t.vertexes).addTo(s);i.on("pm:edit",r),n[i._leaflet_id]=t,e.addLayer(i)})),t.length?s.fitBounds(e.getBounds()):(s.locate(),s.once("locationfound",(function(e){s.zoomIn(8),s.panTo(e.latlng)}))),function(){s.off("pm:drawstart",i),s.off("pm:create",l),s.off("pm:remove",o)}})),null}))),et=Object(p.a)((function(e){return{map:{height:"400px"}}})),tt=Object(O.a)((function(e){var t=e.filter,n=et();return Object(i.jsxs)(Ke.a,{className:n.map,center:[0,0],zoom:0,scrollWheelZoom:!0,children:[Object(i.jsx)(Qe.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(i.jsx)(Ye,{polygons:t.polygons})]})})),nt=T.filter((function(e){return"F"!==e.id})),it=Object(O.a)((function(e){var t=e.filters,n=e.device,l=r.a.useState(!n||y[n].polygons?T:nt),o=Object(c.a)(l,2),s=o[0],u=o[1],d=Object(J.b)((function(e){t.remove(e)}));return Object(a.useEffect)((function(){u(!n||y[n].polygons?T:nt)}),[n]),t.map((function(e){return Object(i.jsxs)(ve,{TransitionProps:{unmountOnExit:!0},expanded:e.open,onChange:function(){return function(e){e.setOpen(!e.open)}(e)},children:[Object(i.jsx)(He.Consumer,{children:function(t){return Object(i.jsx)(Ge,{item:e,param1:t,removeLabel:"Remove filter",removeCallback:d})}}),Object(i.jsx)(Be,{children:Object(i.jsxs)(g.a,{container:!0,spacing:3,children:[Object(i.jsx)(g.a,{item:!0,xs:12,sm:12,children:Object(i.jsx)(R,{items:s,required:!0,label:"Type",setter:e.setType,value:e.type})}),Object(i.jsx)(g.a,{item:!0,xs:12,sm:12,children:"E"===e.type?Object(i.jsx)(Je,{filter:e}):"F"===e.type?Object(i.jsx)(tt,{filter:e}):"B"===e.type?Object(i.jsx)(Ie,{filter:e}):"A"===e.type?Object(i.jsx)(qe,{label:"% per second",filter:e}):"C"===e.type?Object(i.jsx)(_e,{filter:e}):"G"===e.type?Object(i.jsx)(Re,{filter:e}):null})]})})]},e.id)}))})),at=Object(p.a)((function(e){return{button:{margin:e.spacing(1)},heading:{display:"flex",justifyContent:"center",alignItems:"center"}}})),rt=Object(O.a)((function(e){var t=e.filterGroups,n=e.lightModes,a=e.device,l=at(),o=Object(J.b)((function(){t.push(new Z(!!n))})),s=Object(J.b)((function(e){t.remove(e)})),c=Object(J.b)((function(e){e.filters.push(new ee)}));return Object(i.jsxs)(r.a.Fragment,{children:[Object(i.jsx)(je.a,{children:t.map((function(e){return Object(i.jsxs)(ve,{TransitionProps:{unmountOnExit:!0},expanded:e.open,onChange:function(){return function(e){e.setOpen(!e.open)}(e)},children:[Object(i.jsx)(Ge,{item:e,param1:n,removeLabel:"Remove group",removeCallback:s}),Object(i.jsxs)(Be,{children:[Object(i.jsxs)(g.a,{container:!0,spacing:3,children:[Object(i.jsx)(g.a,{item:!0,xs:12,sm:6,children:Object(i.jsx)(W,{label:"Group name",setter:e.setName,value:e.name})}),n?Object(i.jsx)(g.a,{item:!0,xs:12,sm:6,children:Object(i.jsx)(R,{required:!0,items:n,label:"Light mode",setter:e.setLightMode,value:e.lightMode})}):null,Object(i.jsx)(g.a,{item:!0,xs:12,sm:12,children:Object(i.jsx)(h.a,{variant:"h5",gutterBottom:!0,children:"Filters"})})]}),Object(i.jsx)("div",{children:Object(i.jsx)(it,{filters:e.filters,device:a})}),Object(i.jsx)(f.a,{variant:"contained",color:"secondary",className:l.button,startIcon:Object(i.jsx)(pe.a,{}),onClick:function(){return c(e)},children:"Add Filter"})]})]},e.id)}))}),Object(i.jsx)("div",{children:Object(i.jsx)(f.a,{variant:"contained",color:"secondary",className:l.button,startIcon:Object(i.jsx)(pe.a,{}),onClick:o,children:"Add Filter Group"})})]})})),lt=Object(O.a)((function(e){var t=e.className,n=e.headerClassName,a=e.lightType,l=e.lightList,o=e.lightFilterGroups,s=e.setLight,u=e.light,d=e.setLightModes,f=e.setDefaultMode,m=e.defaultMode,j=function(e){return null!==e?l.find((function(t){return t.id===e})).modes:null},b=r.a.useState(j(u)),p=Object(c.a)(b,2),O=p[0],x=p[1];return Object(i.jsxs)(fe.a,{className:t,children:[Object(i.jsx)(ge.a,{title:a+" Configuration",titleTypographyProps:{align:"center"},className:n}),Object(i.jsxs)(me.a,{children:[Object(i.jsx)(h.a,{color:"textPrimary",gutterBottom:!0,children:'In order to configure the light, the correct light should be selected as every light supports only a few modes from the "ANT+ Bike Lights Device Profile" and may differ from light to light. In case your light is not on the list, please feel free to open an issue on GitHub or select "Unknown" option. The "Unknown" option includes all the available options from the ANT+ profile and should only be used to test which modes your light supports. In case an unsupported mode is selected, the application will display an error code on the screen. When the correct light is selected, then we can define filters that triggers a certain light mode and set the default mode, which will be used when none of the defined filters evaluated to true. The filter logic is the same as for global filters, where all filters inside a filter group need to be true in order the filter group light mode to be used. In case having multiple filter groups, the light mode of the first filter group to be evaluated to true, will be used.'}),Object(i.jsxs)(g.a,{container:!0,spacing:3,justify:"center",children:[Object(i.jsx)(g.a,{item:!0,xs:12,sm:4,children:Object(i.jsx)(R,{items:l,label:a,setter:function(e){x(j(e)),s(e),d(null!==e?l.find((function(t){return t.id===e})).lightModes:null)},value:u})}),null!==u&&O?Object(i.jsxs)(r.a.Fragment,{children:[Object(i.jsx)(g.a,{item:!0,xs:12,sm:4,children:Object(i.jsx)(R,{required:!0,items:O,label:"Default mode",setter:f,value:m})}),Object(i.jsx)(g.a,{item:!0,xs:12,sm:12,children:Object(i.jsx)(h.a,{variant:"h5",color:"textPrimary",children:"Filter groups"})})]}):null]}),null!==u&&O?Object(i.jsx)(rt,{filterGroups:o,lightModes:O}):null]})]})})),ot=Object(p.a)((function(e){return{mainContent:{backgroundColor:e.palette.background.paper,padding:e.spacing(8,0,6)},copyButton:{marginTop:e.spacing(4)},cardHeader:{backgroundColor:"light"===e.palette.mode?e.palette.grey[200]:e.palette.grey[700]},card:{marginTop:e.spacing(2)}}})),st=Object(O.a)((function(e){var t=e.configuration,n=ot();return Object(i.jsxs)(r.a.Fragment,{children:[Object(i.jsxs)(fe.a,{className:n.card,children:[Object(i.jsx)(ge.a,{title:"Global Filters",titleTypographyProps:{align:"center"},className:n.cardHeader}),Object(i.jsxs)(me.a,{children:[Object(i.jsx)(h.a,{color:"textPrimary",gutterBottom:!0,children:"Global filters are the first filters that are checked when the lights are in Smart mode and in case none of the defined filters evaluates to be true, the head/tail lights filters won't be evaluated. In other words, with global filters we can define filters that we want to apply for both tail and head lights (e.g. turn them on after sunset). In case you have only one light or don't have any common filter for both lights, just leave it empty and head/taillight filters will be evaluated. In order to define a filter that requires multiple conditions to be true, we have so called filter groups, that consist of one or more filters that must be true so that the whole filter group is evaluated to true. In case you need that any of the defined filters turns on the lights, create a filter group for each filter. In short, the Smart mode logic uses AND operator for filters inside a filter group and OR operator for filter groups. For each filter group a name can be set that will be displayed on your Garmin device (only for those that have enough space) when evaluated to true, so that it is easier to understand which filter group triggered the lights to be turned on. When having multiple filter groups, the name of the first one to be evaluated as true will be used."}),Object(i.jsx)(g.a,{className:n.card,item:!0,xs:12,sm:12,children:Object(i.jsx)(h.a,{variant:"h5",color:"textPrimary",children:"Filter groups"})}),Object(i.jsx)(rt,{filterGroups:t.globalFilterGroups,device:t.device})]})]}),Object(i.jsx)(lt,{className:n.card,headerClassName:n.cardHeader,lightType:"Headlight",lightList:B,lightFilterGroups:t.headlightFilterGroups,light:t.headlight,setLight:t.setHeadlight,setLightModes:t.setHeadlightModes,setDefaultMode:t.setHeadlightDefaultMode,defaultMode:t.headlightDefaultMode}),Object(i.jsx)(lt,{className:n.card,headerClassName:n.cardHeader,lightType:"Taillight",lightList:D,light:t.taillight,setLight:t.setTaillight,setLightModes:t.setTaillightModes,lightFilterGroups:t.taillightFilterGroups,setDefaultMode:t.setTaillightDefaultMode,defaultMode:t.taillightDefaultMode}),Object(i.jsxs)(fe.a,{className:n.card,children:[Object(i.jsx)(ge.a,{title:"Lights Configuration",titleTypographyProps:{align:"center"},className:n.cardHeader}),Object(i.jsxs)(me.a,{children:[Object(i.jsx)(h.a,{color:"textPrimary",gutterBottom:!0,children:"tetssds"}),t.isValid()?Object(i.jsxs)(r.a.Fragment,{children:[Object(i.jsx)(g.a,{item:!0,xs:12,sm:12,children:Object(i.jsx)(W,{value:t.getConfigurationValue()})}),Object(i.jsx)(g.a,{item:!0,className:n.copyButton,xs:12,sm:12,children:Object(i.jsx)(f.a,{variant:"contained",onClick:function(){navigator.clipboard.writeText(t.getConfigurationValue())},children:"Copy to clipboard"})})]}):Object(i.jsx)(g.a,{item:!0,xs:12,sm:12,children:Object(i.jsx)(j.a,{severity:"error",children:"Please fill the missing fields."})})]})]})]})})),ct=Object(p.a)((function(e){return{mainContent:{backgroundColor:e.palette.background.paper,padding:e.spacing(8,0,6)},parseButtonCell:{marginBottom:"auto",marginTop:"auto"},parseButton:{width:"100%"}}})),ut=Object(O.a)((function(){var e=ct(),t=new he,n=r.a.useState({configuration:t,existingConfigurationValue:null,context:Ae(t),parseError:!1}),a=Object(c.a)(n,2),l=a[0],o=a[1];return Object(i.jsxs)(He.Provider,{value:l.context,children:[Object(i.jsx)(m.a,{}),Object(i.jsx)(u.a,{position:"relative",children:Object(i.jsx)(b.a,{children:Object(i.jsx)(h.a,{variant:"h6",color:"inherit",noWrap:!0,children:"SmartBikeLights Configurator"})})}),Object(i.jsx)("main",{children:Object(i.jsx)("div",{className:e.mainContent,children:Object(i.jsxs)(d.a,{maxWidth:"md",children:[Object(i.jsxs)(g.a,{container:!0,spacing:2,justify:"center",children:[Object(i.jsx)(g.a,{item:!0,xs:8,sm:10,children:Object(i.jsx)(W,{label:"Existing configuration",value:l.existingConfigurationValue,setter:function(e){o(Object(s.a)(Object(s.a)({},l),{},{existingConfigurationValue:e}))}})}),Object(i.jsx)(g.a,{item:!0,xs:4,sm:2,className:e.parseButtonCell,children:Object(i.jsx)(f.a,{className:e.parseButton,variant:"contained",onClick:function(){!function(e){try{if(!(t=he.parse(e)))return void o(Object(s.a)(Object(s.a)({},l),{},{existingConfigurationValue:null,parseError:!0}));o({configuration:t,existingConfigurationValue:null,context:Ae(t),parseError:!1})}catch(n){o(Object(s.a)(Object(s.a)({},l),{},{existingConfigurationValue:null,parseError:!0}))}}(l.existingConfigurationValue)},children:"Parse"})}),l.parseError?Object(i.jsx)(g.a,{item:!0,xs:12,sm:12,children:Object(i.jsx)(j.a,{severity:"error",children:"Invalid configuration."})}):null,Object(i.jsx)(g.a,{item:!0,xs:12,sm:4,children:Object(i.jsx)(R,{required:!0,items:x,label:"Garmin device",setter:l.configuration.setDevice,value:l.configuration.device})}),Object(i.jsx)(g.a,{item:!0,xs:6,sm:4,children:Object(i.jsx)(R,{required:!0,items:M,label:"Units",setter:function(e){l.configuration.setUnits(e),o(Object(s.a)(Object(s.a)({},l),{},{context:Ae(l.configuration)}))},value:l.configuration.units})}),Object(i.jsx)(g.a,{item:!0,xs:6,sm:4,children:Object(i.jsx)(R,{required:!0,items:N,label:"Time format",setter:function(e){l.configuration.setTimeFormat(e),o(Object(s.a)(Object(s.a)({},l),{},{context:Ae(l.configuration)}))},value:l.configuration.timeFormat})})]}),l.configuration.device?Object(i.jsx)(st,{configuration:l.configuration}):null]})})})]})})),dt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,231)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,r=t.getLCP,l=t.getTTFB;n(e),i(e),a(e),r(e),l(e)}))},ht=n(221),ft=n(209);o.a.render(Object(i.jsx)(r.a.StrictMode,{children:Object(i.jsx)(ft.b,{dateAdapter:ht.a,children:Object(i.jsx)(ut,{})})}),document.getElementById("root")),dt()}},[[153,1,2]]]);
//# sourceMappingURL=main.4b9c886e.chunk.js.map