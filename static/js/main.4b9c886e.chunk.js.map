{"version":3,"sources":["constants.js","inputs/AppSelect.js","inputs/AppTextInput.js","models/FilterGroup.js","models/Filter.js","models/Polygon.js","models/Configuration.js","components/Accordion.js","components/AccordionSummary.js","components/AccordionDetails.js","inputs/AppSlider.js","filters/BatteryFilter.js","filters/NumberFilter.js","AppContext.js","filters/SpeedFilter.js","filters/GpsAccuracyFilter.js","inputs/AppTimePicker.js","filters/TimespanFilter.js","filters/PositionFilter.js","components/Filters.js","components/FilterGroups.js","components/LightConfiguration.js","components/DeviceConfiguration.js","App.js","reportWebVitals.js","index.js"],"names":["deviceList","id","name","polygons","map","forEach","item","deviceMap","filterList","filterMap","timespanTypeList","timespanTypeMap","unitList","speedUnitList","timeFormatList","operatorList","batteryStateList","gpsAccuracyList","lightModes","headlightList","modes","taillightList","selectUseStyles","makeStyles","theme","input","width","observer","items","label","value","setter","required","nanoid","classes","useEffect","find","i","TextField","className","select","error","onChange","event","newValue","target","variant","InputProps","readOnly","endAdornment","Fragment","IconButton","style","marginRight","padding","onClick","MenuItem","textInputUseStyles","type","Number","isNaN","parseFloat","FilterGroup","hasLightMode","filters","lightMode","open","setName","length","replace","setLightMode","setOpen","this","_hasLightMode","makeAutoObservable","config","f","getConfigurationValue","every","isValid","m","getTimespanPartName","timeFormat","format","addSeconds","startOfToday","Filter","operator","fromType","fromValue","toType","toValue","setType","setOperator","setValue","setFromType","setFromValue","setToType","setToValue","getTimespanPartValue","p","vertexes","v","context","units","speed","unitsName","Math","round","getSpeedName","Polygon","setVertexes","lat","lng","defaultFilter","parseNumber","chars","index","resultIndex","stringValue","isFloat","char","charNumber","charCodeAt","parseInt","parseTitle","parseTimespanPart","filterResult","data","dataIndex","parsePolygons","Array","parseGenericFilter","parseTimespan","parseToFilter","filter","polygon","endIndex","j","push","parseToFilterGroups","filterGroups","values","totalFilters","groupDataLength","totalGroups","filterValue","parseFilters","filterGroup","Configuration","device","globalFilterGroups","headlight","headlightModes","headlightFilterGroups","headlightDefaultMode","taillight","taillightModes","taillightFilterGroups","taillightDefaultMode","setDevice","setUnits","setTimeFormat","setHeadlight","setHeadlightModes","setHeadlightDefaultMode","setTaillight","setTaillightModes","setTaillightDefaultMode","g","getFilterGroupsConfigurationValue","defaultMode","defaultGroupConfig","group","getDefaultGroupConfigurationValue","configuration","defaultGroup","splice","withStyles","root","border","boxShadow","borderBottom","display","margin","expanded","Accordion","AccordionSummary","backgroundColor","marginBottom","minHeight","content","MuiAccordionSummary","useStyles","alignItems","color","justifyContent","param1","removeLabel","removeCallback","expandIcon","aria-controls","Grid","container","xs","sm","FormControlLabel","aria-label","stopPropagation","onFocus","control","edge","Typography","getDisplayName","spacing","AccordionDetails","sliderMakeStyles","getLabelText","step","min","max","defaultValue","gutterBottom","Slider","marks","aria-labelledby","valueLabelFormat","valueLabelDisplay","AppSelect","AppSlider","AppTextInput","getContextValue","AppContext","React","createContext","useContext","useState","setSpeed","newSpeed","mps","handleChange","Date","Consumer","TimePicker","ampm","renderInput","params","getInitValue","getFilterValue","differenceInSeconds","state","setState","setSeconds","AppTimePicker","Polygons","mappings","handleDrawStart","e","workingLayer","on","sourceTarget","getLatLngs","pm","Draw","_finishShape","handleEdit","layer","_leaflet_id","handleCreate","action","handleRemove","remove","off","useMap","setGlobalOptions","snappable","allowSelfIntersection","hideMiddleMarkers","addControls","position","drawCircle","drawMarker","drawCircleMarker","drawRectangle","drawPolyline","cutPolygon","Toolbar","changeActionsOfControl","featureGroup","addTo","addLayer","fitBounds","getBounds","locate","once","zoomIn","panTo","latlng","height","MapContainer","center","zoom","scrollWheelZoom","TileLayer","attribution","url","filtersWoPosition","o","filterTypes","setfilterTypes","removeFilter","TransitionProps","unmountOnExit","TimespanFilter","PositionFilter","BatteryFilter","NumberFilter","SpeedFilter","GpsAccuracyFilter","button","heading","createFilterGroup","removeFilterGroup","createFilter","List","Filters","Button","startIcon","headerClassName","lightType","lightList","lightFilterGroups","setLight","light","setLightModes","setDefaultMode","getModes","l","setModes","Card","CardHeader","title","titleTypographyProps","align","CardContent","justify","FilterGroups","mainContent","palette","background","paper","copyButton","marginTop","cardHeader","mode","grey","card","LightConfiguration","navigator","clipboard","writeText","Alert","severity","parseButtonCell","parseButton","existingConfigurationValue","parseError","Provider","CssBaseline","AppBar","noWrap","Container","maxWidth","parse","DeviceConfiguration","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","LocalizationProvider","dateAdapter","DateFnsAdapter","App","document","getElementById"],"mappings":"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","file":"static/js/main.4b9c886e.chunk.js","sourcesContent":["export const deviceList = [\r\n  { id: 'B2713', name: 'Edge 1030', polygons: true },\r\n  { id: 'B3095', name: 'Edge 1030 / Bontrager', polygons: true },\r\n  { id: 'B3570', name: 'Edge 1030 Plus', polygons: true },\r\n  { id: 'B1836', name: 'Edge 1000 / Explore', polygons: true },\r\n  { id: 'B3011', name: 'Edge Explore', polygons: true },\r\n  { id: 'B3122', name: 'Edge 830', polygons: true },\r\n  { id: 'B2530', name: 'Edge 820 / Explore', polygons: true },\r\n  { id: 'B3121', name: 'Edge 530', polygons: true },\r\n  { id: 'B3112', name: 'Edge 520 Plus', polygons: true },\r\n  { id: 'B2067', name: 'Edge 520', polygons: false },\r\n  { id: 'B3558', name: 'Edge 130 Plus', polygons: false },\r\n  { id: 'B2909', name: 'Edge 130', polygons: false }\r\n];\r\n\r\nlet map = {};\r\ndeviceList.forEach(item => map[item.id] = item);\r\n\r\nexport const deviceMap = map;\r\n\r\nexport const filterList = [\r\n  { id: 'A', name: 'Acceleration' },\r\n  { id: 'B', name: 'Light Battery' },\r\n  { id: 'C', name: 'Speed' },\r\n  { id: 'E', name: 'Timespan' },\r\n  { id: 'F', name: 'Position' },\r\n  { id: 'G', name: 'GPS accuracy' }\r\n];\r\n\r\nmap = {};\r\nfilterList.forEach(item => map[item.id] = item.name);\r\n\r\nexport const filterMap = map;\r\n\r\nexport const timespanTypeList = [\r\n  { id: '0', name: 'UTC Time' },\r\n  { id: 'r', name: 'Sunrise' },\r\n  { id: 's', name: 'Sunset' }\r\n];\r\n\r\nmap = {};\r\ntimespanTypeList.forEach(item => map[item.id] = item.name);\r\n\r\nexport const timespanTypeMap = map;\r\n\r\nexport const unitList = [\r\n  { id: 0, name: 'Metric (km/h)' },\r\n  { id: 1, name: 'Statute (MPH)' },\r\n];\r\n\r\nexport const speedUnitList = [\r\n  { id: 0, name: 'km/h' },\r\n  { id: 1, name: 'MPH' },\r\n];\r\n\r\nexport const timeFormatList = [\r\n  { id: 0, name: '24h' },\r\n  { id: 1, name: '12h' },\r\n];\r\n\r\nexport const operatorList = [\r\n  { id: '=', name: 'Equal to' },\r\n  { id: '>', name: 'Greater than' },\r\n  { id: '<', name: 'Lower than' }\r\n];\r\n\r\nexport const batteryStateList = [\r\n  null,\r\n  'Bad',\r\n  'Low',\r\n  'Ok',\r\n  'Good',\r\n  'New'\r\n];\r\n\r\nexport const gpsAccuracyList = [\r\n  'N/A',\r\n  'Last',\r\n  'Poor',\r\n  'Ok',\r\n  'Good'\r\n];\r\n\r\nconst lightModes = [\r\n  { id: 0, name: 'Off' },\r\n  { id: 1, name: 'Steady beam 81-100% intensity' },\r\n  { id: 2, name: 'Steady beam 61-80% intensity' },\r\n  { id: 3, name: 'Steady beam 41-60% intensity' },\r\n  { id: 4, name: 'Steady beam 21-40% intensity' },\r\n  { id: 5, name: 'Steady beam 0-20% intensity' },\r\n  { id: 6, name: 'Slow flash mode' },\r\n  { id: 7, name: 'Fast flash mode' },\r\n  { id: 8, name: 'Randomly timed flash mode' },\r\n  { id: 9, name: 'Auto' },\r\n  { id: 59, name: 'Custom mode 1 (manufacturer-defined)' },\r\n  { id: 60, name: 'Custom mode 2 (manufacturer-defined)' },\r\n  { id: 61, name: 'Custom mode 3 (manufacturer-defined)' },\r\n  { id: 62, name: 'Custom mode 4 (manufacturer-defined)' },\r\n  { id: 63, name: 'Custom mode 5 (manufacturer-defined)' }\r\n];\r\n\r\nexport const headlightList = [\r\n  {\r\n    id: 1,\r\n    name: 'Bontrager ION PRO RT',\r\n    modes: [\r\n      { id: 0, name: 'Off' },\r\n      { id: 1, name: 'High' },\r\n      { id: 2, name: 'Medium' },\r\n      { id: 5, name: 'Low' },\r\n      { id: 62, name: 'Night Flash' },\r\n      { id: 63, name: 'Day Flash' }\r\n    ],\r\n    lightModes: 79691776\r\n  },\r\n  {\r\n    id: 99,\r\n    name: 'Unknown',\r\n    modes: lightModes,\r\n    lightModes: 0\r\n  }\r\n];\r\n\r\nexport const taillightList = [\r\n  {\r\n    id: 1,\r\n    name: 'Bontrager Flare RT',\r\n    modes: [\r\n      { id: 0, name: 'Off' },\r\n      { id: 1, name: 'Day Steady' },\r\n      { id: 5, name: 'Night Steady' },\r\n      { id: 7, name: 'Day Flash' },\r\n      { id: 8, name: 'All-Day Flash' },\r\n      { id: 63, name: 'Night Flash' }\r\n    ],\r\n    lightModes: 100663648\r\n  },\r\n  {\r\n    id: 99,\r\n    name: 'Unknown',\r\n    modes: lightModes,\r\n    lightModes: 0\r\n  }\r\n];","import { useEffect } from 'react';\r\nimport { nanoid } from 'nanoid';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Close from \"@material-ui/icons/Close\";\r\nimport React from 'react';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { observer } from \"mobx-react-lite\";\r\n\r\nconst selectUseStyles = makeStyles((theme) => ({\r\n  input: {\r\n    width: '100%',\r\n  },\r\n}));\r\n\r\nexport default observer(({ items, label, value, setter, required }) => {\r\n  const id = nanoid();\r\n  const classes = selectUseStyles();\r\n  const handleChange = (event) => {\r\n    const newValue = event.target.value;\r\n    setter(!items.find(i => i.id === newValue) ? null : newValue);\r\n  };\r\n\r\n  useEffect(\r\n    () => {\r\n      if (!items.find(i => i.id === value)) {\r\n        setter(null);\r\n      }\r\n    },\r\n    [items, value, setter]\r\n  );\r\n\r\n  if (value === null || !items.find(i => i.id === value)) {\r\n    value = '';\r\n  }\r\n\r\n  return (\r\n    <TextField\r\n      className={classes.input}\r\n      id={id}\r\n      select\r\n      required={required}\r\n      error={ required && value === '' ? true : false}\r\n      label={label}\r\n      value={value}\r\n      onChange={handleChange}\r\n      variant=\"standard\"\r\n      InputProps={{\r\n        readOnly: !setter,\r\n        endAdornment: (\r\n          setter && !required && value !== '' ?\r\n          <React.Fragment>\r\n            <IconButton\r\n              style={{ marginRight: \"1em\", padding: '0' }}\r\n              onClick={() => setter(null)}\r\n            >\r\n              <Close />\r\n            </IconButton>\r\n          </React.Fragment>\r\n          : null\r\n        )\r\n      }}\r\n    >\r\n      {items.map((item) => (\r\n        <MenuItem key={item.id} value={item.id}>{item.name}</MenuItem>\r\n      ))}\r\n    </TextField>\r\n  );\r\n});\r\n","import { nanoid } from 'nanoid';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { observer } from 'mobx-react-lite';\r\n\r\nconst textInputUseStyles = makeStyles((theme) => ({\r\n  input: {\r\n    width: '100%',\r\n  },\r\n}));\r\n\r\nexport default observer(({ type, label, value, setter, required }) => {\r\n  const id = nanoid();\r\n  const classes = textInputUseStyles();\r\n  const handleChange = (event) => {\r\n    let newValue = event.target.value;\r\n    setter(type === 'number' ? parseFloat(newValue) : newValue);\r\n  };\r\n\r\n  if (value === null || (type === 'number' && Number.isNaN(value))) {\r\n    value = '';\r\n  }\r\n\r\n  return (\r\n    <TextField\r\n      id={id}\r\n      className={classes.input}\r\n      label={label}\r\n      required={required}\r\n      error={required && !value ? true : false}\r\n      variant=\"standard\"\r\n      type={type}\r\n      value={value}\r\n      onChange={handleChange}\r\n      InputProps={{\r\n        readOnly: !setter,\r\n      }}\r\n    />\r\n  );\r\n});","import { nanoid } from 'nanoid';\r\nimport { makeAutoObservable } from 'mobx';\r\n\r\nexport default class FilterGroup {\r\n  _hasLightMode;\r\n  id;\r\n  name = null;\r\n  filters = [];\r\n  lightMode = null;\r\n  // Ui properties\r\n  open = true;\r\n\r\n  constructor(hasLightMode) {\r\n    this._hasLightMode = hasLightMode;\r\n    this.id = nanoid();\r\n    makeAutoObservable(this, {\r\n      id: false\r\n    });\r\n  }\r\n\r\n  get displayName() {\r\n    return 'Group ' + (this.name || '');\r\n  }\r\n\r\n  getConfigurationValue() {\r\n    let config = `${(this.name || '')}:${this.filters.length}`;\r\n    if (this._hasLightMode) {\r\n      config += `:${this.lightMode}`;\r\n    }\r\n\r\n    this.filters.forEach(f => {\r\n      config += `${(f.getConfigurationValue() || '')}`;\r\n    });\r\n\r\n    return config;\r\n  }\r\n\r\n  isValid() {\r\n    if ((this._hasLightMode && this.lightMode === null) || !this.filters.length) {\r\n      return false;\r\n    }\r\n\r\n    return this.filters.every(f => f.isValid());\r\n  }\r\n\r\n  setName = (value) => {\r\n    if (value.length > 6) {\r\n      return;\r\n    }\r\n\r\n    this.name = value.replace(/[^a-z0-9]/gi,'');\r\n  }\r\n\r\n  setLightMode = (value) => {\r\n    this.lightMode = value;\r\n  }\r\n\r\n  setOpen = (value) => {\r\n    this.open = value;\r\n  }\r\n\r\n  getDisplayName(lightModes) {\r\n    var name = 'Group';\r\n    if (this.name) {\r\n      name += ' Name: ' + this.name;\r\n    }\r\n\r\n    if (lightModes && this.lightMode !== null) {\r\n      name += ' Light Mode: ' + lightModes.find(m => m.id === this.lightMode).name;\r\n    }\r\n\r\n    return name;\r\n  }\r\n}","import { nanoid } from 'nanoid';\r\nimport { makeAutoObservable } from 'mobx';\r\nimport { filterMap, batteryStateList, gpsAccuracyList, timespanTypeMap, speedUnitList } from '../constants';\r\nimport addSeconds from 'date-fns/addSeconds';\r\nimport startOfToday from 'date-fns/startOfToday';\r\nimport format from 'date-fns/format';\r\n\r\nconst getTimespanPartName = (type, value, timeFormat) => {\r\n  if (value === null) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    type === '0' /* Time */\r\n    ? format(addSeconds(startOfToday(), value), timeFormat === 0 /* 24H */ ? 'H:mm' : 'h:mm aa')\r\n    : timespanTypeMap[type] + (\r\n      value === 0 ? ''\r\n      : value > 0 ? '+' + (value / 60) + ' min'\r\n      : (value / 60) + ' min')\r\n  );\r\n};\r\n\r\nconst getSpeedName = (value, units) => {\r\n  const speed = units === 0 /* Metric */\r\n      ? value * 3.6\r\n      : value * 2.236934;\r\n  const unitsName = speedUnitList[units].name;\r\n\r\n  return `${Math.round(speed * 100) / 100} ${unitsName}`; \r\n};\r\n\r\nexport default class Filter {\r\n  id;\r\n  type = null;\r\n  operator = null;\r\n  value = null;\r\n  // Timeline fields\r\n  fromType = null;\r\n  fromValue = null;\r\n  toType = null;\r\n  toValue = null;\r\n  // Position fields\r\n  polygons = [];\r\n  // Ui properties\r\n  open = true;\r\n\r\n  constructor() {\r\n    this.id = nanoid();\r\n    makeAutoObservable(this, {\r\n      id: false\r\n    });\r\n  }\r\n\r\n  isValid() {\r\n    switch (this.type) {\r\n      case 'E':\r\n        return this.fromType && this.fromValue !== null && !Number.isNaN(this.fromValue) && \r\n          this.toType && this.toValue !== null && !Number.isNaN(this.toValue);\r\n      case 'F':\r\n        return this.polygons.length;\r\n      default:\r\n        return this.type && this.value !== '' && this.value !== null && !Number.isNaN(this.value) && this.operator;\r\n    }\r\n  }\r\n\r\n  getConfigurationValue() {\r\n    const getTimespanPartValue = (type, value) => {\r\n      return type === '0' /* Time */ ? value : `${type}${value}`;\r\n    };\r\n\r\n    let config = this.type;\r\n    if (this.type === 'F') {\r\n      if (!this.polygons.length) {\r\n        return null;\r\n      }\r\n\r\n      config += `${this.polygons.length}`;\r\n      this.polygons.forEach(p => {\r\n        p.vertexes.forEach(v => {\r\n          config += `,${v[0]},${v[1]}`;\r\n        });\r\n      });\r\n\r\n      return config;\r\n    }\r\n\r\n    if (this.type === 'E') {\r\n      config += `${getTimespanPartValue(this.fromType, this.fromValue)},`;\r\n      config += `${getTimespanPartValue(this.toType, this.toValue)}`;\r\n      return config;\r\n    }\r\n\r\n    return `${config}${this.operator}${this.value}`;\r\n  }\r\n\r\n  get hasOperator() {\r\n    return this.type && this.type !== 'E' /* Timespan */ && this.type !== 'F' /* Position */;\r\n  }\r\n\r\n  getDisplayName(context) {\r\n    if (!this.type && this.type !== 'E' /* Timespan */) {\r\n      return null;\r\n    }\r\n\r\n    let name = filterMap[this.type] + ' ';\r\n    if (this.type === 'E' /* Timespan */) {\r\n      if (this.fromValue !== null && this.toValue !== null) {\r\n        name += 'from ' + getTimespanPartName(this.fromType, this.fromValue, context.timeFormat) + ' to ';\r\n        name += getTimespanPartName(this.toType, this.toValue, context.timeFormat);\r\n      }\r\n    } else if (this.type === 'F' /* Position */) {\r\n      if (this.polygons.length) {\r\n        name += this.polygons.length + ' polygons';\r\n      }\r\n    } else if (this.value !== null && !Number.isNaN(this.value)) {\r\n      name += ((this.operator || '') + ' ');\r\n      switch (this.type) {\r\n        case 'A': // Acceleration\r\n          name += (this.value + '% per second');\r\n          break;\r\n        case 'B': // Battery state\r\n          name += batteryStateList[this.value];\r\n          break;\r\n        case 'C': // Speed\r\n          name += getSpeedName(this.value, context.units);\r\n          break;\r\n        case 'G': // GPS Accuracy\r\n          name += gpsAccuracyList[this.value];\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n\r\n    return name;\r\n  }\r\n\r\n  setType = (value) => {\r\n    this.type = value;\r\n  }\r\n\r\n  setOperator = (value) => {\r\n    this.operator = value;\r\n  }\r\n\r\n  setValue = (value) => {\r\n    this.value = value;\r\n  }\r\n\r\n  setFromType = (value) => {\r\n    this.fromType = value;\r\n  }\r\n\r\n  setFromValue = (value) => {\r\n    this.fromValue = value;\r\n  }\r\n\r\n  setToType = (value) => {\r\n    this.toType = value;\r\n  }\r\n\r\n  setToValue = (value) => {\r\n    this.toValue = value;\r\n  }\r\n\r\n  setOpen = (value) => {\r\n    this.open = value;\r\n  }\r\n}","import { makeAutoObservable } from 'mobx';\r\n\r\nconst round = (value) => {\r\n  return Math.round(value * 100000) / 100000;\r\n}\r\n\r\nexport default class Polygon {\r\n  vertexes = [];\r\n \r\n  constructor(vertexes) {\r\n    makeAutoObservable(this, {\r\n    });\r\n    if (vertexes) {\r\n      this.setVertexes(vertexes);\r\n    }\r\n  }\r\n\r\n  setVertexes = (value) => {\r\n    this.vertexes = value.map(p => [round(p.lat), round(p.lng)]);\r\n  }\r\n}","import { makeAutoObservable } from 'mobx';\r\nimport FilterGroup from './FilterGroup';\r\nimport Filter from './Filter';\r\nimport Polygon from './Polygon';\r\n\r\nconst defaultFilter = new Filter();\r\ndefaultFilter.type = 'D';\r\ndefaultFilter.operator = '=';\r\ndefaultFilter.value = '1';\r\n\r\nconst getDefaultGroupConfigurationValue = (lightMode) => {\r\n  let group = new FilterGroup(true);\r\n  group.lightMode = lightMode;\r\n  group.filters.push(defaultFilter);\r\n  return group.getConfigurationValue();\r\n};\r\n\r\nconst parseNumber = (chars, index, resultIndex) => {\r\n  let stringValue = null;\r\n  let i;\r\n  let isFloat = false;\r\n  for (i = index; i < chars.length; i++) {\r\n    const char = chars[i];\r\n    const charNumber = char.charCodeAt(0);\r\n    if (charNumber === 46 /* . */) {\r\n      isFloat = true;\r\n    } else if (charNumber > 57 /* 9 */ || charNumber < 48 /* 0 */) {\r\n      break;\r\n    }\r\n\r\n    stringValue = stringValue === null ? char : stringValue + char;\r\n  }\r\n\r\n  resultIndex[0] = i;\r\n  return stringValue === null ? null\r\n    : isFloat ? parseFloat(stringValue)\r\n    : parseInt(stringValue);\r\n};\r\n\r\nconst parseTitle = (chars, index, resultIndex) => {\r\n  let stringValue = null;\r\n  let i;\r\n  for (i = index; i < chars.length; i++) {\r\n    const char = chars[i];\r\n    if (char === ':' || char === '#') {\r\n        break;\r\n    }\r\n\r\n    stringValue = stringValue === null ? char : stringValue + char;\r\n  }\r\n\r\n  resultIndex[0] = i;\r\n  return stringValue;\r\n};\r\n\r\nconst parseTimespanPart = (chars, index, filterResult, data, dataIndex) => {\r\n  const char = chars[index];\r\n  const type = char !== 's' /* Sunset */ && char !== 'r' /* Sunrise */\r\n    ? '0'\r\n    : char;\r\n  if (type !== '0') {\r\n      index++;\r\n  }\r\n\r\n  data[dataIndex] = type;\r\n  data[dataIndex + 1] = parseNumber(chars, index, filterResult);\r\n};\r\n\r\nconst parsePolygons = (chars, index, filterResult) => {\r\n  filterResult[1] = null; /* Filter operator */\r\n  // The first value represents the total number of polygons\r\n  const data = new Array(parseNumber(chars, index, filterResult) * 8);\r\n  let dataIndex = 0;\r\n  index = filterResult[0] + 1;\r\n  while (dataIndex < data.length) {\r\n      data[dataIndex] = parseNumber(chars, index, filterResult);\r\n      dataIndex++;\r\n      index = filterResult[0] + 1;\r\n  }\r\n\r\n  return data;\r\n};\r\n\r\nconst parseGenericFilter = (chars, index, filterResult) => {\r\n  filterResult[1] = chars[index]; // Filter operator\r\n\r\n  return parseNumber(chars, index + 1, filterResult);\r\n};\r\n\r\nconst parseTimespan = (chars, index, filterResult) => {\r\n  const data = new Array(4);\r\n  filterResult[1] = null; /* Filter operator */\r\n  parseTimespanPart(chars, index, filterResult, data, 0);\r\n  parseTimespanPart(chars, filterResult[0] + 1 /* Skip , */, filterResult, data, 2);\r\n\r\n  return data;\r\n};\r\n\r\nconst parseFilters = (chars, i, lightMode, filterResult) => {\r\n  const totalFilters = parseNumber(chars, i, filterResult);\r\n  if (totalFilters === null) {\r\n    return null;\r\n  }\r\n\r\n  const groupDataLength = lightMode ? 3 : 2;\r\n  const totalGroups = parseNumber(chars, filterResult[0] + 1, filterResult);\r\n  const data = new Array((totalFilters * 3) + totalGroups * groupDataLength);\r\n  i = filterResult[0];\r\n  let dataIndex = 0;\r\n\r\n  while (i < chars.length) {\r\n    const charNumber = chars[i].charCodeAt(0);\r\n    if (charNumber === 35 /* # */) {\r\n      break;\r\n    }\r\n\r\n    if (charNumber === 124 /* | */) {\r\n      data[dataIndex] = parseTitle(chars, i + 1, filterResult); // Group title\r\n      data[dataIndex + 1] = parseNumber(chars, filterResult[0] + 1, filterResult); // Number of filters in the group\r\n      if (lightMode) {\r\n        data[dataIndex + 2] = parseNumber(chars, filterResult[0] + 1 /* Skip : */, filterResult); // The light mode id\r\n      }\r\n\r\n      dataIndex += groupDataLength;\r\n      i = filterResult[0];\r\n    } else if (charNumber >= 65 /* A */ && charNumber <= 90 /* Z */) {\r\n      const filterValue = charNumber === 70 /* F */ ? parsePolygons(chars, i + 1, filterResult)\r\n          : charNumber === 69 /* E */ ? parseTimespan(chars, i + 1, filterResult)\r\n          : parseGenericFilter(chars, i + 1, filterResult);\r\n\r\n      data[dataIndex] = chars[i]; // Filter type\r\n      data[dataIndex + 1] = filterResult[1]; // Filter operator\r\n      data[dataIndex + 2] = filterValue; // Filter value\r\n      dataIndex += 3;\r\n      i = filterResult[0];\r\n    } else {\r\n      i++;\r\n    }\r\n  }\r\n\r\n  return data;\r\n};\r\n\r\nconst parseToFilter = (type, operator, value) => {\r\n  let filter = new Filter();\r\n  filter.type = type;\r\n  filter.operator = operator;\r\n  if (type === 'E' /* Timespan */) {\r\n    filter.fromType = value[0];\r\n    filter.fromValue = value[1];\r\n    filter.toType = value[2];\r\n    filter.toValue = value[3];\r\n  } else if (type === 'F' /* Position */) {\r\n    for (let i = 0; i < value.length; i += 8) {\r\n      let polygon = new Polygon();\r\n      let endIndex = i + 8;\r\n      for (let j = i; j < endIndex;) {\r\n        polygon.vertexes.push([value[j++], value[j++]]);\r\n      }\r\n\r\n      filter.polygons.push(polygon);\r\n    }\r\n  } else {\r\n    filter.value = value;\r\n  }\r\n\r\n  return filter;\r\n};\r\n\r\nconst parseToFilterGroups = (chars, i, hasLightMode, filterResult) => {\r\n  let filterGroups = [];\r\n  const values = parseFilters(chars, i, hasLightMode, filterResult);\r\n  if (!values) {\r\n    return filterGroups;\r\n  }\r\n\r\n  for (let i = 0; i < values.length;) {\r\n    let filterGroup = new FilterGroup(hasLightMode);\r\n    filterGroup.name = values[i++];\r\n    let totalFilters = values[i++];\r\n    filterGroup.lightMode = hasLightMode ? values[i++] : null;\r\n    let endIndex = i + totalFilters * 3;\r\n    for (let j = i; j < endIndex;) {\r\n      filterGroup.filters.push(parseToFilter(values[j++], values[j++], values[j++]));\r\n    }\r\n\r\n    i = endIndex;\r\n    filterGroups.push(filterGroup);\r\n  }\r\n\r\n  return filterGroups;\r\n};\r\n\r\nexport default class Configuration {\r\n\r\n  device = null;\r\n  units = 0;\r\n  timeFormat = 0;\r\n  globalFilterGroups = [];\r\n  headlight = null;\r\n  headlightModes = null;\r\n  headlightFilterGroups = [];\r\n  headlightDefaultMode = null;\r\n  taillight = null;\r\n  taillightModes = null;\r\n  taillightFilterGroups = [];\r\n  taillightDefaultMode = null;\r\n\r\n  constructor() {\r\n    makeAutoObservable(this, {\r\n    });\r\n  }\r\n\r\n  static parse(value) {\r\n    if (!value || value.length === 0) {\r\n      return null;\r\n    }\r\n\r\n    const filterResult = [0 /* next index */, 0 /* operator type */];\r\n    const configuration = new Configuration();\r\n    configuration.globalFilterGroups = parseToFilterGroups(value, 0, false, filterResult);\r\n\r\n    configuration.headlightModes = parseNumber(value, filterResult[0] + 1, filterResult);\r\n    let filterGroups = parseToFilterGroups(value, filterResult[0] + 1, true, filterResult);\r\n    let defaultGroup;\r\n    if (filterGroups.length) {\r\n      defaultGroup = filterGroups.splice(filterGroups.length - 1, 1)[0];\r\n      configuration.headlightDefaultMode = defaultGroup.lightMode;\r\n    }\r\n\r\n    configuration.headlightFilterGroups = filterGroups;\r\n\r\n    configuration.taillightModes = parseNumber(value, filterResult[0] + 1, filterResult);\r\n    filterGroups = parseToFilterGroups(value, filterResult[0] + 1, true, filterResult);\r\n    if (filterGroups.length) {\r\n      defaultGroup = filterGroups.splice(filterGroups.length - 1, 1)[0];\r\n      configuration.taillightDefaultMode = defaultGroup.lightMode;\r\n    }\r\n\r\n    configuration.taillightFilterGroups = filterGroups;\r\n\r\n    configuration.device = parseTitle(value, filterResult[0] + 1, filterResult);\r\n    configuration.headlight = parseNumber(value, filterResult[0] + 1, filterResult);\r\n    configuration.taillight = parseNumber(value, filterResult[0] + 1, filterResult);\r\n    configuration.units = parseNumber(value, filterResult[0] + 1, filterResult);\r\n    configuration.timeFormat = parseNumber(value, filterResult[0] + 1, filterResult);\r\n\r\n    return configuration.isValid() ? configuration : null;\r\n  }\r\n\r\n  isValid() {\r\n    return this.globalFilterGroups.every(g => g.isValid()) && (\r\n        (this.headlight !== null && this.headlightDefaultMode !== null && this.headlightFilterGroups.every(g => g.isValid())) ||\r\n        (this.taillight !== null && this.taillightDefaultMode !== null && this.taillightFilterGroups.every(g => g.isValid()))\r\n      ) && this.device;\r\n  }\r\n\r\n  getConfigurationValue() {\r\n    if (!this.isValid()) {\r\n      return null;\r\n    }\r\n\r\n    let config = `${this.getFilterGroupsConfigurationValue(this.globalFilterGroups, null)}`;\r\n    config += `#${(this.headlightModes || '')}`;\r\n    config += `#${this.getFilterGroupsConfigurationValue(this.headlightFilterGroups, this.headlightDefaultMode)}`;\r\n    config += `#${(this.taillightModes || '')}`;\r\n    config += `#${this.getFilterGroupsConfigurationValue(this.taillightFilterGroups, this.taillightDefaultMode)}`;\r\n    config += `#${(this.device)}`;\r\n    config += `#${(this.headlight === null ? '' : this.headlight)}`;\r\n    config += `#${(this.taillight === null ? '' : this.taillight)}`;\r\n    config += `#${(this.units)}`;\r\n    config += `#${(this.timeFormat)}`;\r\n\r\n    return config;\r\n  }\r\n\r\n  getFilterGroupsConfigurationValue(filterGroups, defaultMode) {\r\n    if (!filterGroups.length && defaultMode === null) {\r\n      return '';\r\n    }\r\n\r\n    let config = '';\r\n    let totalFilters = 0;\r\n    let totalGroups = filterGroups.length;\r\n    let defaultGroupConfig = ''\r\n    if (defaultMode !== null) {\r\n      totalFilters++;\r\n      totalGroups++;\r\n      defaultGroupConfig = `|${getDefaultGroupConfigurationValue(defaultMode)}`;\r\n    }\r\n\r\n    filterGroups.forEach(g => {\r\n      totalFilters += g.filters.length;\r\n      config += `|${g.getConfigurationValue()}`;\r\n    });\r\n\r\n    return `${totalFilters},${totalGroups}${config}${defaultGroupConfig}`;\r\n  }\r\n\r\n  setDevice = (value) => {\r\n    this.device = value;\r\n  }\r\n\r\n  setUnits = (value) => {\r\n    this.units = value;\r\n  }\r\n\r\n  setTimeFormat = (value) => {\r\n    this.timeFormat = value;\r\n  }\r\n\r\n  setHeadlight = (value) => {\r\n    this.headlight = value;\r\n  }\r\n\r\n  setHeadlightModes = (value) => {\r\n    this.headlightModes = value;\r\n  }\r\n\r\n  setHeadlightDefaultMode = (value) => {\r\n    this.headlightDefaultMode = value;\r\n  }\r\n\r\n  setTaillight = (value) => {\r\n    this.taillight = value;\r\n  }\r\n\r\n  setTaillightModes = (value) => {\r\n    this.taillightModes = value;\r\n  }\r\n\r\n  setTaillightDefaultMode = (value) => {\r\n    this.taillightDefaultMode = value;\r\n  }\r\n}","import Accordion from '@material-ui/core/Accordion';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nexport default withStyles({\r\n  root: {\r\n    border: '1px solid rgba(0, 0, 0, .125)',\r\n    boxShadow: 'none',\r\n    '&:not(:last-child)': {\r\n      borderBottom: 0\r\n    },\r\n    '&:before': {\r\n      display: 'none'\r\n    },\r\n    '&$expanded': {\r\n      margin: 'auto'\r\n    }\r\n  },\r\n  expanded: {}\r\n})(Accordion);","import MuiAccordionSummary from '@material-ui/core/AccordionSummary';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport ErrorOutlineIcon from '@material-ui/icons/ErrorOutline';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { withStyles, makeStyles } from '@material-ui/core/styles';\r\nimport { observer } from 'mobx-react-lite';\r\n\r\nconst AccordionSummary = withStyles({\r\n  root: {\r\n    backgroundColor: 'rgba(0, 0, 0, .03)',\r\n    borderBottom: '1px solid rgba(0, 0, 0, .125)',\r\n    marginBottom: -1,\r\n    minHeight: 56,\r\n    '&$expanded': {\r\n      minHeight: 56\r\n    }\r\n  },\r\n  content: {\r\n    '&$expanded': {\r\n      margin: '12px 0'\r\n    }\r\n  },\r\n  expanded: {},\r\n})(MuiAccordionSummary);\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  name: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n  },\r\n  error: {\r\n    color: '#f44336',\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  }\r\n}));\r\n\r\nexport default observer(({ item, param1, removeLabel, removeCallback }) => {\r\n  const classes = useStyles();\r\n  return <AccordionSummary\r\n    expandIcon={<ExpandMoreIcon />}\r\n    aria-controls={item.id}\r\n    id={item.id}\r\n  >\r\n    <div style={{ width: '100%' }}>\r\n      <Grid container>\r\n        <Grid item xs={2} sm={1}>\r\n          <FormControlLabel\r\n            aria-label={removeLabel}\r\n            onClick={(event) => event.stopPropagation()}\r\n            onFocus={(event) => event.stopPropagation()}\r\n            control={\r\n            <IconButton edge=\"end\" aria-label=\"delete\" onClick={() => removeCallback(item)}>\r\n              <DeleteIcon />\r\n            </IconButton>\r\n            }\r\n          />\r\n        </Grid>\r\n        <Grid item xs={9} sm={10} className={classes.name} >\r\n          <Typography >{item.getDisplayName(param1)}</Typography>\r\n        </Grid>\r\n        <Grid item xs={1} sm={1} className={classes.error} >\r\n        { item.isValid() ? null : <ErrorOutlineIcon /> }\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  </AccordionSummary>\r\n});","import AccordionDetails from '@material-ui/core/AccordionDetails';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nexport default withStyles((theme) => ({\r\n  root: {\r\n    padding: theme.spacing(2)\r\n  }\r\n}))(AccordionDetails);","import { nanoid } from 'nanoid';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Slider from '@material-ui/core/Slider';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { observer } from 'mobx-react-lite';\r\n\r\nconst sliderMakeStyles = makeStyles((theme) => ({\r\n  input: {\r\n    width: '100%',\r\n  },\r\n}));\r\n\r\nexport default observer(({ label, value, setter, getLabelText, step, min, max, defaultValue }) => {\r\n  const id = nanoid();\r\n  const classes = sliderMakeStyles();\r\n  const handleChange = (event, newValue) => {\r\n    setter(newValue);\r\n  };\r\n\r\n  if (getLabelText != null && !getLabelText(value)) {\r\n    value = defaultValue;\r\n  }\r\n\r\n  return (\r\n    <div className={classes.input}>\r\n      <Typography id={id} gutterBottom>{label}</Typography>\r\n      <Slider\r\n        step={step}\r\n        min={min}\r\n        max={max}\r\n        marks\r\n        aria-labelledby={id}\r\n        valueLabelFormat={getLabelText}\r\n        valueLabelDisplay=\"auto\"\r\n        value={value}\r\n        onChange={handleChange} />\r\n    </div>\r\n  );\r\n});","import Grid from '@material-ui/core/Grid';\r\nimport AppSelect from '../inputs/AppSelect';\r\nimport AppSlider from '../inputs/AppSlider';\r\nimport { operatorList, batteryStateList } from '../constants';\r\nimport { observer } from 'mobx-react-lite';\r\n\r\nexport default observer(({ filter }) => {\r\n  const getLabelText = (value) => {\r\n    return batteryStateList[value];\r\n  };\r\n\r\n  return (\r\n  <Grid container spacing={3}>\r\n    <Grid item xs={12} sm={4}>\r\n      <AppSelect required items={operatorList} label=\"Operator\" setter={filter.setOperator} value={filter.operator} /> \r\n    </Grid>\r\n    <Grid item xs={12} sm={8}>\r\n      <AppSlider\r\n        label=\"Battery state\"\r\n        setter={filter.setValue}\r\n        value={filter.value}\r\n        getLabelText={getLabelText}\r\n        step={1}\r\n        min={1}\r\n        max={5}\r\n        defaultValue={5}\r\n      />\r\n    </Grid>\r\n  </Grid>\r\n  );\r\n});","import Grid from '@material-ui/core/Grid';\r\nimport AppSelect from '../inputs/AppSelect';\r\nimport AppTextInput from '../inputs/AppTextInput';\r\nimport { operatorList } from '../constants';\r\nimport { observer } from 'mobx-react-lite';\r\n\r\nexport default observer(({ label, filter }) => {\r\n  return (\r\n  <Grid container spacing={3}>\r\n    <Grid item xs={12} sm={4}>\r\n      <AppSelect required items={operatorList} label=\"Operator\" setter={filter.setOperator} value={filter.operator} /> \r\n    </Grid>\r\n    <Grid item xs={12} sm={8}>\r\n      <AppTextInput required label={label} type=\"number\" setter={filter.setValue} value={filter.value} />\r\n    </Grid>\r\n  </Grid>\r\n  );\r\n});","import React from 'react';\r\nimport Configuration from './models/Configuration';\r\n\r\nexport const getContextValue = (configuration) => {\r\n  return {\r\n    units: configuration.units,\r\n    timeFormat: configuration.timeFormat\r\n  };\r\n};\r\n\r\nexport const AppContext = React.createContext(getContextValue(new Configuration()));","import React, { useContext, useEffect } from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport AppSelect from '../inputs/AppSelect';\r\nimport AppTextInput from '../inputs/AppTextInput';\r\nimport { operatorList, speedUnitList } from '../constants';\r\nimport { observer } from 'mobx-react-lite';\r\nimport { AppContext } from '../AppContext';\r\n\r\nexport default observer(({ filter }) => {\r\n  const { units } = useContext(AppContext);\r\n  const [speed, setSpeed] = React.useState(0);\r\n  const setFilterValue = (speed) => {\r\n    if (speed === '') {\r\n      speed = null;\r\n    }\r\n\r\n    const mps = units === 1 /* Statute */\r\n      ? speed * 0.44704\r\n      : speed * 0.27777777777778;\r\n    filter.setValue(speed === null ? null : Math.round(mps * 100000) / 100000);\r\n  };\r\n\r\n  useEffect(() => {\r\n    let newSpeed;\r\n    if (Number.isNaN(filter.value)) {\r\n      newSpeed = 0;\r\n    } else {\r\n      newSpeed = units === 0 /* Metric */\r\n        ? filter.value * 3.6\r\n        : filter.value * 2.236934;\r\n    }\r\n\r\n    setSpeed(Math.round(newSpeed * 100) / 100);\r\n  }, [units, filter.value, setSpeed]);\r\n\r\n  return (\r\n    <Grid container spacing={3}>\r\n      <Grid item xs={12} sm={4}>\r\n        <AppSelect required items={operatorList} label=\"Operator\" setter={filter.setOperator} value={filter.operator} /> \r\n      </Grid>\r\n      <Grid item xs={12} sm={5}>\r\n        <AppTextInput required label=\"Speed\" type=\"number\" setter={setFilterValue} value={speed} />\r\n      </Grid>\r\n      <Grid item xs={12} sm={3}>\r\n        <AppSelect items={speedUnitList} label=\"Units\" value={units} />\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n});","import Grid from '@material-ui/core/Grid';\r\nimport AppSelect from '../inputs/AppSelect';\r\nimport AppSlider from '../inputs/AppSlider';\r\nimport { operatorList, gpsAccuracyList } from '../constants';\r\nimport { observer } from 'mobx-react-lite';\r\n\r\nexport default observer(({ filter }) => {\r\n  const getLabelText = (value) => {\r\n    return gpsAccuracyList[value];\r\n  };\r\n\r\n  return (\r\n  <Grid container spacing={3}>\r\n    <Grid item xs={12} sm={4}>\r\n      <AppSelect required items={operatorList} label=\"Operator\" setter={filter.setOperator} value={filter.operator} /> \r\n    </Grid>\r\n    <Grid item xs={12} sm={8}>\r\n      <AppSlider\r\n        label=\"Accuracy\"\r\n        setter={filter.setValue}\r\n        value={filter.value}\r\n        getLabelText={getLabelText}\r\n        step={1}\r\n        min={0}\r\n        max={4}\r\n        defaultValue={4}\r\n      />\r\n    </Grid>\r\n  </Grid>\r\n  );\r\n});","import TimePicker from '@material-ui/lab/TimePicker';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { observer } from 'mobx-react-lite';\r\nimport { AppContext } from '../AppContext';\r\n\r\nexport default observer(({ label, value, setter }) => {\r\n  const handleChange = (newValue) => {\r\n    setter(newValue);\r\n  };\r\n\r\n  if (!(value instanceof Date)) {\r\n    value = '';\r\n  }\r\n\r\n  return (\r\n    <AppContext.Consumer>\r\n      {({timeFormat}) => (\r\n        <TimePicker\r\n          ampm={timeFormat === 1}\r\n          label={label}\r\n          value={value}\r\n          onChange={handleChange}\r\n          renderInput={(params) => (\r\n            <TextField {...params} margin=\"normal\" variant=\"standard\" />\r\n          )}\r\n        />\r\n      )}\r\n    </AppContext.Consumer>\r\n  );\r\n});","import React from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport AppSelect from '../inputs/AppSelect';\r\nimport AppTextInput from '../inputs/AppTextInput';\r\nimport AppTimePicker from '../inputs/AppTimePicker';\r\nimport { observer } from \"mobx-react-lite\"\r\nimport { timespanTypeList } from \"../constants\";\r\nimport addSeconds from \"date-fns/addSeconds\";\r\nimport startOfToday from \"date-fns/startOfToday\";\r\nimport { setSeconds, differenceInSeconds } from 'date-fns'\r\n\r\nexport default observer(({ filter }) => {\r\n  const getInitValue = (type, value) => {\r\n    if (value === null) {\r\n      return null;\r\n    }\r\n\r\n    return type === '0' /* Time */\r\n      ? addSeconds(startOfToday(), value)\r\n      : value / 60;\r\n  }\r\n\r\n  const getFilterValue = (type, value) => {\r\n    if (value === null) {\r\n      return null;\r\n    }\r\n\r\n    return type === '0' /* Time */\r\n      ? differenceInSeconds(value, startOfToday())\r\n      : value * 60;\r\n  }\r\n\r\n  const [state, setState] = React.useState({ \r\n    fromValue: getInitValue(filter.fromType, filter.fromValue),\r\n    toValue: getInitValue(filter.toType, filter.toValue)\r\n  });\r\n\r\n  const setFromValue = (value) => {\r\n    value = filter.fromType === '0' /* Time */ ? setSeconds(value, 0) : value;\r\n    filter.setFromValue(getFilterValue(filter.fromType, value));\r\n    setState({ fromValue: value, toValue: state.toValue });\r\n  };\r\n  const setToValue = (value) => {\r\n    value = filter.toType === '0' /* Time */ ? setSeconds(value, 0) : value;\r\n    filter.setToValue(getFilterValue(filter.toType, value));\r\n    setState({ fromValue: state.fromValue, toValue: value });\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Grid container spacing={3}>\r\n        <Grid item xs={12} sm={6}>\r\n          <AppSelect required items={timespanTypeList} label=\"From\" setter={filter.setFromType} value={filter.fromType} />\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          {\r\n            !filter.fromType ? null\r\n            : filter.fromType === '0' ? <AppTimePicker setter={setFromValue} value={state.fromValue} />\r\n            : <AppTextInput required label=\"Offset in minutes\" type=\"number\" setter={setFromValue} value={state.fromValue} />\r\n          }\r\n        </Grid>\r\n      </Grid>\r\n      <Grid container spacing={3}>\r\n        <Grid item xs={12} sm={6}>\r\n          <AppSelect required items={timespanTypeList} label=\"To\" setter={filter.setToType} value={filter.toType} />\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          {\r\n            !filter.toType ? null\r\n            : filter.toType === '0' ? <AppTimePicker setter={setToValue} value={state.toValue} />\r\n            : <AppTextInput required label=\"Offset in minutes\" type=\"number\" setter={setToValue} value={state.toValue} />\r\n          }\r\n        </Grid>\r\n      </Grid>\r\n    </React.Fragment>\r\n  );\r\n});","import { useEffect } from 'react';\r\nimport { MapContainer, TileLayer, useMap } from 'react-leaflet'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { observer } from 'mobx-react-lite';\r\nimport { action } from 'mobx';\r\nimport {featureGroup, polygon} from 'leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport '@geoman-io/leaflet-geoman-free';\r\nimport '@geoman-io/leaflet-geoman-free/dist/leaflet-geoman.css';\r\nimport Polygon from '../models/Polygon';\r\n\r\nconst Polygons = observer(({ polygons }) => {\r\n  const mappings = {};\r\n  const handleDrawStart = e => {\r\n    e.workingLayer.on('pm:vertexadded', e => {\r\n      if (e.sourceTarget.getLatLngs().length >= 4) {\r\n        map.pm.Draw.Polygon._finishShape(e);\r\n      }\r\n    });\r\n  };\r\n  const handleEdit = e => {\r\n    const polygon = mappings[e.layer._leaflet_id];\r\n    polygon.setVertexes(e.layer.getLatLngs()[0]);\r\n  };\r\n  const handleCreate = action(e => {\r\n    const polygon = new Polygon(e.layer.getLatLngs()[0]);\r\n    mappings[e.layer._leaflet_id] = polygon;\r\n    polygons.push(polygon);\r\n    e.layer.on('pm:edit', handleEdit);\r\n  });\r\n  const handleRemove = action(e => {\r\n    const polygon = mappings[e.layer._leaflet_id];\r\n    delete mappings[e.layer._leaflet_id];\r\n    polygons.remove(polygon);\r\n    e.layer.off('pm:edit', handleEdit);\r\n  });\r\n  const map = useMap();\r\n  useEffect(() => {\r\n    map.pm.setGlobalOptions({\r\n      snappable: false,\r\n      allowSelfIntersection: false,\r\n      hideMiddleMarkers: true\r\n    });\r\n    map.pm.addControls({\r\n      position: 'topleft',\r\n      drawCircle: false,\r\n      drawMarker: false,\r\n      drawCircleMarker: false,\r\n      drawRectangle: false,\r\n      drawPolyline: false,\r\n      cutPolygon: false\r\n    });\r\n    map.pm.Toolbar.changeActionsOfControl('Polygon', ['removeLastVertex', 'cancel']);\r\n    // Subscribe to event\r\n    map.on('pm:drawstart', handleDrawStart);\r\n    map.on('pm:create', handleCreate);\r\n    map.on('pm:remove', handleRemove);\r\n\r\n    // Draw polygons\r\n    var group = featureGroup();\r\n    polygons.forEach(p => {\r\n      const layer = polygon(p.vertexes).addTo(map);\r\n      layer.on('pm:edit', handleEdit);\r\n      mappings[layer._leaflet_id] = p;\r\n      group.addLayer(layer)\r\n    });\r\n    // Center the view\r\n    if (polygons.length) {\r\n      map.fitBounds(group.getBounds());\r\n    } else {\r\n      map.locate();\r\n      map.once('locationfound', e => {\r\n        map.zoomIn(8);\r\n        map.panTo(e.latlng);\r\n      });\r\n    }\r\n\r\n    return function cleanup() {\r\n      map.off('pm:drawstart', handleDrawStart);\r\n      map.off('pm:create', handleCreate);\r\n      map.off('pm:remove', handleRemove);\r\n    };\r\n  });\r\n\r\n  return null;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  map: {\r\n    height: '400px'\r\n  }\r\n}));\r\n\r\nexport default observer(({ filter }) => {\r\n  const classes = useStyles();\r\n  return (\r\n  <MapContainer className={classes.map} center={[0, 0]} zoom={0} scrollWheelZoom={true}>\r\n    <TileLayer\r\n      attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n      url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n    />\r\n    <Polygons polygons={filter.polygons} />\r\n  </MapContainer>\r\n  );\r\n});","import React, { useEffect } from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Accordion from './Accordion';\r\nimport AccordionSummary from './AccordionSummary';\r\nimport AccordionDetails from './AccordionDetails';\r\nimport { observer } from 'mobx-react-lite';\r\nimport AppSelect from '../inputs/AppSelect';\r\nimport BatteryFilter from '../filters/BatteryFilter';\r\nimport NumberFilter from '../filters/NumberFilter';\r\nimport SpeedFilter from '../filters/SpeedFilter';\r\nimport GpsAccuracyFilter from '../filters/GpsAccuracyFilter';\r\nimport TimespanFilter from '../filters/TimespanFilter';\r\nimport PositionFilter from '../filters/PositionFilter';\r\nimport { filterList, deviceMap } from '../constants';\r\nimport { AppContext } from '../AppContext';\r\nimport { action } from 'mobx';\r\n\r\nconst filtersWoPosition = filterList.filter(o => o.id !== 'F');\r\n\r\nexport default observer(({ filters, device }) => {\r\n  const [filterTypes, setfilterTypes] = React.useState(!device || deviceMap[device].polygons ? filterList : filtersWoPosition);\r\n  const removeFilter = action((filter) => {\r\n    filters.remove(filter);\r\n  });\r\n  const handleChange = (filter) => {\r\n    filter.setOpen(!filter.open);\r\n  };\r\n\r\n  useEffect(\r\n    () => {\r\n      setfilterTypes(!device || deviceMap[device].polygons ? filterList : filtersWoPosition);\r\n    },\r\n    [device]\r\n  );\r\n\r\n  return filters.map(filter => (\r\n    <Accordion key={filter.id}\r\n      TransitionProps={{ unmountOnExit: true }}\r\n      expanded={filter.open}\r\n      onChange={() => handleChange(filter)}>\r\n      <AppContext.Consumer>\r\n        {(context) => (\r\n          <AccordionSummary\r\n            item={filter}\r\n            param1={context}\r\n            removeLabel=\"Remove filter\"\r\n            removeCallback={removeFilter}\r\n          />\r\n        )}\r\n      </AppContext.Consumer>\r\n      <AccordionDetails>\r\n        <Grid container spacing={3}>\r\n          <Grid item xs={12} sm={12}>\r\n            <AppSelect items={filterTypes} required label=\"Type\" setter={filter.setType} value={filter.type} />\r\n          </Grid>\r\n          <Grid item xs={12} sm={12}>\r\n            {\r\n              filter.type === 'E' ? <TimespanFilter filter={filter} />\r\n              : filter.type === 'F' ? <PositionFilter filter={filter} />\r\n              : filter.type === 'B' ? <BatteryFilter filter={filter} />\r\n              : filter.type === 'A' ? <NumberFilter label=\"% per second\" filter={filter} />\r\n              : filter.type === 'C' ? <SpeedFilter filter={filter} />\r\n              : filter.type === 'G' ? <GpsAccuracyFilter filter={filter} />\r\n              : null\r\n            }\r\n          </Grid>\r\n        </Grid>\r\n      </AccordionDetails>\r\n    </Accordion>\r\n  ));\r\n});","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport List from '@material-ui/core/List';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport Accordion from './Accordion';\r\nimport AccordionSummary from './AccordionSummary';\r\nimport AccordionDetails from './AccordionDetails';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { action } from 'mobx';\r\nimport { observer } from 'mobx-react-lite';\r\nimport AppTextInput from '../inputs/AppTextInput';\r\nimport AppSelect from '../inputs/AppSelect';\r\nimport FilterGroup from '../models/FilterGroup';\r\nimport Filter from '../models/Filter';\r\nimport Filters from '../components/Filters';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  button: {\r\n    margin: theme.spacing(1)\r\n  },\r\n  heading: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  }\r\n}));\r\nexport default observer(({ filterGroups, lightModes, device }) => {\r\n  const classes = useStyles();\r\n  const createFilterGroup = action(() => {\r\n    filterGroups.push(new FilterGroup(!!lightModes));\r\n  });\r\n  const removeFilterGroup = action((filterGroup) => {\r\n    filterGroups.remove(filterGroup);\r\n  });\r\n  const createFilter = action((filterGroup) => {\r\n    filterGroup.filters.push(new Filter());\r\n  });\r\n  const handleChange = (filterGroup) => {\r\n    filterGroup.setOpen(!filterGroup.open);\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <List>\r\n        {filterGroups.map(filterGroup => (\r\n        <Accordion key={filterGroup.id}\r\n              TransitionProps={{ unmountOnExit: true }}\r\n              expanded={filterGroup.open}\r\n              onChange={() => handleChange(filterGroup)}>\r\n          <AccordionSummary\r\n            item={filterGroup}\r\n            param1={lightModes}\r\n            removeLabel=\"Remove group\"\r\n            removeCallback={removeFilterGroup}\r\n          />\r\n          <AccordionDetails>\r\n            <Grid container spacing={3}>\r\n              <Grid item xs={12} sm={6}>\r\n                <AppTextInput label=\"Group name\" setter={filterGroup.setName} value={filterGroup.name} />\r\n              </Grid>\r\n              {\r\n                lightModes ? (\r\n                <Grid item xs={12} sm={6}>\r\n                  <AppSelect required items={lightModes} label=\"Light mode\" setter={filterGroup.setLightMode} value={filterGroup.lightMode} />\r\n                </Grid>\r\n                )\r\n                : null\r\n              }\r\n              <Grid item xs={12} sm={12}>\r\n                <Typography variant=\"h5\" gutterBottom>Filters</Typography>\r\n              </Grid>\r\n            </Grid>\r\n            <div>\r\n              <Filters filters={filterGroup.filters} device={device} />\r\n            </div>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              className={classes.button}\r\n              startIcon={<AddIcon />}\r\n              onClick={() => createFilter(filterGroup)}\r\n            >\r\n              Add Filter\r\n            </Button>\r\n\r\n          </AccordionDetails>\r\n        </Accordion>\r\n        ))}\r\n      </List>\r\n      <div>\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"secondary\"\r\n          className={classes.button}\r\n          startIcon={<AddIcon />}\r\n          onClick={createFilterGroup}\r\n        >\r\n          Add Filter Group\r\n        </Button>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n});","import React from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { observer } from 'mobx-react-lite';\r\nimport FilterGroups from './FilterGroups';\r\nimport AppSelect from '../inputs/AppSelect';\r\n\r\nexport default observer(({\r\n  className, headerClassName, lightType, lightList, lightFilterGroups, setLight, light, setLightModes, setDefaultMode, defaultMode }) => {\r\n  const getModes = (value) => {\r\n    return value !== null ? lightList.find(l => l.id === value).modes : null;\r\n  };\r\n  const [modes, setModes] = React.useState(getModes(light));\r\n  const setValue = (value) => {\r\n    setModes(getModes(value));\r\n    setLight(value);\r\n    setLightModes(value !== null ? lightList.find(l => l.id === value).lightModes : null);\r\n  };\r\n\r\n  return (\r\n    <Card className={className}>\r\n      <CardHeader\r\n        title={lightType + ' Configuration'}\r\n        titleTypographyProps={{ align: 'center' }}\r\n        className={headerClassName}\r\n      />\r\n      <CardContent>\r\n        <Typography color=\"textPrimary\" gutterBottom>\r\n        In order to configure the light, the correct light should be selected as every light supports only a few modes from the \"ANT+ Bike Lights Device Profile\" \r\n        and may differ from light to light. In case your light is not on the list, please feel free to open an issue on GitHub or select \"Unknown\" option. The \r\n        \"Unknown\" option includes all the available options from the ANT+ profile and should only be used to test which modes your light supports. In case an \r\n        unsupported mode is selected, the application will display an error code on the screen. When the correct light is selected, then we can define filters that \r\n        triggers a certain light mode and set the default mode, which will be used when none of the defined filters evaluated to true. The filter logic is the same \r\n        as for global filters, where all filters inside a filter group need to be true in order the filter group light mode to be used. In case having multiple \r\n        filter groups, the light mode of the first filter group to be evaluated to true, will be used.\r\n        </Typography>\r\n        <Grid container spacing={3} justify=\"center\">\r\n          <Grid item xs={12} sm={4}>\r\n            <AppSelect items={lightList} label={lightType} setter={setValue} value={light} />\r\n          </Grid>\r\n          {\r\n            light !== null && modes\r\n            ?\r\n            <React.Fragment>\r\n              <Grid item xs={12} sm={4}>\r\n                <AppSelect required items={modes} label=\"Default mode\" setter={setDefaultMode} value={defaultMode} />\r\n              </Grid>\r\n              <Grid item xs={12} sm={12}>\r\n                <Typography variant=\"h5\" color=\"textPrimary\">\r\n                  Filter groups\r\n                </Typography>\r\n              </Grid>\r\n            </React.Fragment>\r\n            : null\r\n          }\r\n        </Grid>\r\n        {\r\n          light !== null && modes\r\n          ? <FilterGroups filterGroups={lightFilterGroups} lightModes={modes} />\r\n          : null\r\n        }\r\n      </CardContent>\r\n    </Card>\r\n    );\r\n});\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport Alert from '@material-ui/core/Alert';\r\nimport { observer } from 'mobx-react-lite'\r\nimport FilterGroups from './FilterGroups';\r\nimport LightConfiguration from './LightConfiguration';\r\nimport AppTextInput from '../inputs/AppTextInput';\r\nimport { headlightList, taillightList } from '../constants';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainContent: {\r\n    backgroundColor: theme.palette.background.paper,\r\n    padding: theme.spacing(8, 0, 6),\r\n  },\r\n  copyButton: {\r\n    marginTop: theme.spacing(4),\r\n  },\r\n  cardHeader: {\r\n    backgroundColor:\r\n      theme.palette.mode === 'light'\r\n        ? theme.palette.grey[200]\r\n        : theme.palette.grey[700],\r\n  },\r\n  card: {\r\n    marginTop: theme.spacing(2)\r\n  }\r\n}));\r\n\r\nexport default observer(({ configuration }) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n      <React.Fragment>\r\n        <Card className={classes.card}>\r\n          <CardHeader\r\n            title=\"Global Filters\"\r\n            titleTypographyProps={{ align: 'center' }}\r\n            className={classes.cardHeader}\r\n          />\r\n          <CardContent>\r\n            <Typography color=\"textPrimary\" gutterBottom>\r\n            Global filters are the first filters that are checked when the lights are in Smart mode and in case none of the defined filters evaluates to be true, \r\n            the head/tail lights filters won't be evaluated. In other words, with global filters we can define filters that we want to apply for both tail \r\n            and head lights (e.g. turn them on after sunset). In case you have only one light or don't have any common filter for both lights, just leave it \r\n            empty and head/taillight filters will be evaluated. In order to define a filter that requires multiple conditions to be true, we have so called filter \r\n            groups, that consist of one or more filters that must be true so that the whole filter group is evaluated to true. In case you need that any of the \r\n            defined filters turns on the lights, create a filter group for each filter. In short, the Smart mode logic uses AND operator for filters inside a \r\n            filter group and OR operator for filter groups. For each filter group a name can be set that will be displayed on your Garmin device (only for those \r\n            that have enough space) when evaluated to true, so that it is easier to understand which filter group triggered the lights to be turned on. When having \r\n            multiple filter groups, the name of the first one to be evaluated as true will be used.\r\n            </Typography>\r\n            <Grid className={classes.card} item xs={12} sm={12}>\r\n              <Typography variant=\"h5\" color=\"textPrimary\">\r\n                  Filter groups\r\n              </Typography>\r\n            </Grid>\r\n            <FilterGroups filterGroups={configuration.globalFilterGroups} device={configuration.device} />\r\n          </CardContent>\r\n        </Card>\r\n        \r\n        <LightConfiguration\r\n          className={classes.card}\r\n          headerClassName={classes.cardHeader}\r\n          lightType=\"Headlight\"\r\n          lightList={headlightList}\r\n          lightFilterGroups={configuration.headlightFilterGroups}\r\n          light={configuration.headlight}\r\n          setLight={configuration.setHeadlight}\r\n          setLightModes={configuration.setHeadlightModes}\r\n          setDefaultMode={configuration.setHeadlightDefaultMode}\r\n          defaultMode={configuration.headlightDefaultMode}\r\n        />\r\n        <LightConfiguration\r\n          className={classes.card}\r\n          headerClassName={classes.cardHeader}\r\n          lightType=\"Taillight\"\r\n          lightList={taillightList}\r\n          light={configuration.taillight}\r\n          setLight={configuration.setTaillight}\r\n          setLightModes={configuration.setTaillightModes}\r\n          lightFilterGroups={configuration.taillightFilterGroups}\r\n          setDefaultMode={configuration.setTaillightDefaultMode}\r\n          defaultMode={configuration.taillightDefaultMode}\r\n        />\r\n\r\n        <Card className={classes.card}>\r\n          <CardHeader\r\n            title=\"Lights Configuration\"\r\n            titleTypographyProps={{ align: 'center' }}\r\n            className={classes.cardHeader}\r\n          />\r\n          <CardContent>\r\n            <Typography color=\"textPrimary\" gutterBottom>\r\n            tetssds\r\n            </Typography>\r\n            {configuration.isValid() ?\r\n            <React.Fragment>\r\n              <Grid item xs={12} sm={12}>\r\n                <AppTextInput value={configuration.getConfigurationValue()} />\r\n              </Grid>\r\n              <Grid item className={classes.copyButton} xs={12} sm={12}>\r\n                <Button variant=\"contained\" onClick={() => {navigator.clipboard.writeText(configuration.getConfigurationValue())}}>Copy to clipboard</Button>\r\n              </Grid>\r\n            </React.Fragment>\r\n            :\r\n            <Grid item xs={12} sm={12}>\r\n              <Alert severity=\"error\">Please fill the missing fields.</Alert>\r\n            </Grid>\r\n            }\r\n          </CardContent>\r\n        </Card>\r\n      </React.Fragment>\r\n    );\r\n});\r\n","import React from 'react';\nimport AppBar from '@material-ui/core/AppBar';\nimport Container from '@material-ui/core/Container';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Grid from '@material-ui/core/Grid';\nimport Alert from '@material-ui/core/Alert';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { observer } from 'mobx-react-lite';\nimport { deviceList, timeFormatList, unitList } from './constants';\nimport AppSelect from './inputs/AppSelect';\nimport AppTextInput from './inputs/AppTextInput';\nimport Configuration from './models/Configuration';\nimport DeviceConfiguration from './components/DeviceConfiguration';\nimport { AppContext, getContextValue } from './AppContext';\n\nconst useStyles = makeStyles((theme) => ({\n  mainContent: {\n    backgroundColor: theme.palette.background.paper,\n    padding: theme.spacing(8, 0, 6)\n  },\n  parseButtonCell: {\n    marginBottom: 'auto',\n    marginTop: 'auto'\n  },\n  parseButton: {\n    width: '100%'\n  }\n}));\n\nexport default observer(() => {\n  const classes = useStyles();\n  let configuration = new Configuration();\n  const [state, setState] = React.useState({\n    configuration: configuration,\n    existingConfigurationValue: null,\n    context: getContextValue(configuration),\n    parseError: false\n  });\n  const setUnits = (value) => {\n    state.configuration.setUnits(value);\n    setState({ ...state, context: getContextValue(state.configuration) });\n  };\n  const setTimeFormat = (value) => {\n    state.configuration.setTimeFormat(value);\n    setState({ ...state, context: getContextValue(state.configuration) });\n  };\n  const setExistingConfigurationValue = (value) => {\n    setState({ ...state, existingConfigurationValue: value });\n  };\n  const parse = (value) => {\n    try {\n      configuration = Configuration.parse(value);\n      if (!configuration) {\n        setState({\n          ...state,\n          existingConfigurationValue: null,\n          parseError: true\n        });\n        return;\n      }\n\n      setState({\n        configuration: configuration,\n        existingConfigurationValue: null,\n        context: getContextValue(configuration),\n        parseError: false\n      });\n    }\n    catch (e) {\n      setState({\n        ...state,\n        existingConfigurationValue: null,\n        parseError: true\n      });\n    }\n  };\n\n  return (\n    <AppContext.Provider value={state.context}>\n      <CssBaseline />\n      <AppBar position=\"relative\">\n        <Toolbar>\n          <Typography variant=\"h6\" color=\"inherit\" noWrap>\n            SmartBikeLights Configurator\n          </Typography>\n        </Toolbar>\n      </AppBar>\n      <main>\n        <div className={classes.mainContent}>\n          <Container maxWidth=\"md\">\n            <Grid container spacing={2} justify=\"center\">\n              <Grid item xs={8} sm={10}>\n                <AppTextInput label=\"Existing configuration\" value={state.existingConfigurationValue} setter={setExistingConfigurationValue} />\n              </Grid>\n              <Grid item xs={4} sm={2} className={classes.parseButtonCell}>\n                <Button className={classes.parseButton} variant=\"contained\" onClick={() => {parse(state.existingConfigurationValue)}}>Parse</Button>\n              </Grid>\n              { state.parseError ?\n                <Grid item xs={12} sm={12}>\n                  <Alert severity=\"error\">Invalid configuration.</Alert>\n                </Grid>\n                : null\n              }\n              <Grid item xs={12} sm={4}>\n                <AppSelect required items={deviceList} label=\"Garmin device\" setter={state.configuration.setDevice} value={state.configuration.device} />\n              </Grid>\n              <Grid item xs={6} sm={4}>\n                <AppSelect required items={unitList} label=\"Units\" setter={setUnits} value={state.configuration.units} />\n              </Grid>\n              <Grid item xs={6} sm={4}>\n                <AppSelect required items={timeFormatList} label=\"Time format\" setter={setTimeFormat} value={state.configuration.timeFormat} />\n              </Grid>\n            </Grid>\n            { state.configuration.device ? <DeviceConfiguration configuration={state.configuration} /> : null }\n          </Container>\n        </div>\n      </main>\n    </AppContext.Provider>\n    );\n});\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nimport reportWebVitals from './reportWebVitals';\nimport DateFnsAdapter from '@material-ui/lab/dateAdapter/date-fns';\nimport LocalizationProvider from '@material-ui/lab/LocalizationProvider';\n\nReactDOM.render(\n  <React.StrictMode>\n    <LocalizationProvider dateAdapter={DateFnsAdapter}>\n      <App />\n    </LocalizationProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}